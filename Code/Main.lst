MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Warning[205]: Found directive in column 1. (LIST)
                      00001 LIST p=16F648A  ;tell assembler what chip we are using
                      00002 #include "P16F648A.inc"  ;include the defaults for the chip
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F648A processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2011 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
Warning[205]: Found directive in column 1. (endm)
Warning[205]: Found directive in column 1. (endm)
                      00416         LIST
                      00003 #include DataTables.asm
                      00001 #Define UI 0x00 ;Upper Item
                      00002 #Define MI 0x01 ;Middle Item
                      00003 #Define LI 0x0ff;Lower Item
                      00004 #Define ND 0x0ff; No Data
                      00005 
                      00006 
                      00007 ;Will be this in future version
                      00008 ; Menu Items Data Table
                      00009 ;Byte1: Menu Position - (Upper , Middle ,Lower)
                      00010 ;Byte2: Menu on Enter
                      00011 ;Byte3: Pointer to RoutineOneEntrer Table
                      00012 ;Byte4: Pointer to TextString Table
                      00013 ;Byte5: Pointer to SecondaryTextString Table
                      00014 ;Byte6: Pointer to Variable Table
                      00015 ;Byte7: Pointer to Cursor Table
                      00016 ;Byte8: Upper Nibble:State Machine - Lower Nibble: Number Of Variables
                      00017 
                      00018 ; comments
                      00019 ; menu position is not needed. State machine should change for upper & lower menu, to not allow further 
                            movement on button press
                      00020 ; so 'byte 1' should be "state machine to allow up to 256 state transitions.
                      00021 ;
                      00022 ;
                      00023 
                      00024 PROG2 Code
                      00025 ; ------------------------------------ 
                      00026 ; Menu Items Data Table
                      00027 ;Byte1: Menu Position (Upper , Middle ,Lower)
                      00028 ;Byte2: Menu on Enter
                      00029 ;Byte3: Routine One Enter - Pointer to Table
                      00030 ;Byte4: Pointer to Text String - PCL
                      00031 ;Byte5: Pointer to Text String - PCLATH
                      00032 ;Byte6: Pointer to Extended Variable Table - PCL
                      00033 ;Byte7: Pointer to Extended Variable Table - PCLATH
                      00034 ;Byte8: Reserved
                      00035 ; ------------------------------------ 
0000                  00036 MenuItemTbl
                      00037 ;Initial Menu
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0000   3400 34FF 3403 00038 Menu1  dt       UI, ND, 3, low M1, High M1,Low Set_Time, High Set_Time,ND       ;Set Clock
       34?? 34?? 34?? 
       34?? 34FF 
0008   3401 3406 3400 00039 Menu2  dt   MI, .6, 0, low M2, High M2,ND,ND,ND                                                 ;Set Tim
                            ers
       34?? 34?? 34FF 
       34FF 34FF 
0010   3401 3435 3400 00040 Menu3  dt   MI,.53, 0, low M3, High M3,ND,ND,ND                                                 ;Set FS 
                            Delay
       34?? 34?? 34FF 
       34FF 34FF 
0018   3401 3437 3400 00041 Menu4  dt   MI,.55, 0, low M4, High M4,ND,ND,ND                                                 ;Manual 
                            Operation
       34?? 34?? 34FF 
       34FF 34FF 
0020   34FF 34FF 3405 00042 Menu5  dt   LI, ND, 5, low M5, High M5,ND,ND,ND         ;Exit
       34?? 34?? 34FF 
       34FF 34FF 
                      00043 ;Menu666 dt  LI,ND, 5, low M666, High M666,ND,ND,ND             ;Exit
                      00044 
                      00045 ;Timers
0028   3400 3408 3400 00046 Menu6  dt  UI, .8 ,0 ,low M6,High M6,ND,ND,ND ; Cycle Timer
       34?? 34?? 34FF 
       34FF 34FF 
0030   34FF 340D 3400 00047 Menu7  dt  LI,.13 ,0 ,low M7,High M7,ND,ND,ND ; Absolute Timer
       34?? 34?? 34FF 
       34FF 34FF 
                      00048 
                      00049 ;Cycle Timer
0038   3400 34FF 3400 00050 Menu8  dt  UI,ND,0, low M8 ,High  M8,Low Cycle_Tmr_Status ,High Cycle_Tmr_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
0040   3401 34FF 3400 00051 Menu9  dt  MI,ND,0, low M9 ,High  M9,Low Cycle_Tmr_Start  ,High Cycle_Tmr_Start ,ND
       34?? 34?? 34?? 
       34?? 34FF 
0048   3401 34FF 3400 00052 Menu10 dt  MI,ND,0, low M10,High M10,Low Cycle_Tmr_Stop   ,High Cycle_Tmr_Stop  ,ND
       34?? 34?? 34?? 
       34?? 34FF 
0050   3401 34FF 3400 00053 Menu11 dt  MI,ND,0, low M11,High M11,Low Cycle_Tmr_Flood  ,High Cycle_Tmr_Flood ,ND
       34?? 34?? 34?? 
       34?? 34FF 
0058   34FF 34FF 3400 00054 Menu12 dt  LI,ND,0, low M12,High M12,Low Cycle_Tmr_Drain  ,High Cycle_Tmr_Drain ,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00055 
                      00056 ;Absolute Timers
0060   3400 3417 3400 00057 Menu13 dt       UI,.23,0, low M13 ,High M13 ,ND,ND,ND ;1
       34?? 34?? 34FF 
       34FF 34FF 
0068   3401 341A 3400 00058 Menu14 dt       MI,.26,0, low M14 ,High M14 ,ND,ND,ND ;2
       34?? 34?? 34FF 
       34FF 34FF 
0070   3401 341D 3400 00059 Menu15 dt       MI,.29,0, low M15 ,High M15 ,ND,ND,ND ;3
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       34?? 34?? 34FF 
       34FF 34FF 
0078   3401 3420 3400 00060 Menu16 dt       MI,.32,0, low M16 ,High M16 ,ND,ND,ND ;4
       34?? 34?? 34FF 
       34FF 34FF 
0080   3401 3423 3400 00061 Menu17 dt       MI,.35,0, low M17 ,High M17 ,ND,ND,ND ;5
       34?? 34?? 34FF 
       34FF 34FF 
0088   3401 3426 3400 00062 Menu18 dt       MI,.38,0, low M18 ,High M18 ,ND,ND,ND ;6
       34?? 34?? 34FF 
       34FF 34FF 
0090   3401 3429 3400 00063 Menu19 dt       MI,.41,0, low M19 ,High M19 ,ND,ND,ND ;7
       34?? 34?? 34FF 
       34FF 34FF 
0098   3401 342C 3400 00064 Menu20 dt       MI,.44,0, low M20 ,High M20 ,ND,ND,ND ;8
       34?? 34?? 34FF 
       34FF 34FF 
00A0   3401 342F 3400 00065 Menu21 dt       MI,.47,0, low M21 ,High M21 ,ND,ND,ND ;9
       34?? 34?? 34FF 
       34FF 34FF 
00A8   34FF 3432 3400 00066 Menu22 dt       LI,.50,0, low M22 ,High M22 ,ND,ND,ND ;10
       34?? 34?? 34FF 
       34FF 34FF 
                      00067 
                      00068 ;tmr1
00B0   3400 34FF 3400 00069 Menu23 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr1_Status ,High ExtMI_Tmr1_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
00B8   3401 34FF 3400 00070 Menu24 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr1_Flood  ,High ExtMI_Tmr1_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
00C0   34FF 34FF 3400 00071 Menu25 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr1_Drain  ,High ExtMI_Tmr1_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00072 ;tmr2
00C8   3400 34FF 3400 00073 Menu26 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr2_Status ,High ExtMI_Tmr2_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
00D0   3401 34FF 3400 00074 Menu27 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr2_Flood  ,High ExtMI_Tmr2_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
00D8   34FF 34FF 3400 00075 Menu28 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr2_Drain  ,High ExtMI_Tmr2_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00076 ;tmr3
00E0   3400 34FF 3400 00077 Menu29 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr3_Status ,High ExtMI_Tmr3_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
00E8   3401 34FF 3400 00078 Menu30 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr3_Flood  ,High ExtMI_Tmr3_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
00F0   34FF 34FF 3400 00079 Menu31 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr3_Drain  ,High ExtMI_Tmr3_Drain,ND
       34?? 34?? 34?? 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       34?? 34FF 
                      00080 ;tmr4
00F8   3400 34FF 3400 00081 Menu32 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr4_Status ,High ExtMI_Tmr4_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
0100   3401 34FF 3400 00082 Menu33 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr4_Flood  ,High ExtMI_Tmr4_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
0108   34FF 34FF 3400 00083 Menu34 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr4_Drain  ,High ExtMI_Tmr4_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00084 ;tmr5
0110   3400 34FF 3400 00085 Menu35 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr5_Status ,High ExtMI_Tmr5_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
0118   3401 34FF 3400 00086 Menu36 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr5_Flood  ,High ExtMI_Tmr5_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
0120   34FF 34FF 3400 00087 Menu37 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr5_Drain  ,High ExtMI_Tmr5_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00088 ;tmr6
0128   3400 34FF 3400 00089 Menu38 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr6_Status ,High ExtMI_Tmr6_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
0130   3401 34FF 3400 00090 Menu39 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr6_Flood  ,High ExtMI_Tmr6_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
0138   34FF 34FF 3400 00091 Menu40 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr6_Drain  ,High ExtMI_Tmr6_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00092 ;tmr7
0140   3400 34FF 3400 00093 Menu41 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr7_Status ,High ExtMI_Tmr7_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
0148   3401 34FF 3400 00094 Menu42 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr7_Flood  ,High ExtMI_Tmr7_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
0150   34FF 34FF 3400 00095 Menu43 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr7_Drain  ,High ExtMI_Tmr7_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00096 ;tmr9
0158   3400 34FF 3400 00097 Menu44 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr8_Status ,High ExtMI_Tmr8_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
0160   3401 34FF 3400 00098 Menu45 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr8_Flood  ,High ExtMI_Tmr8_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
0168   34FF 34FF 3400 00099 Menu46 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr8_Drain  ,High ExtMI_Tmr8_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00100 ;tmr9
0170   3400 34FF 3400 00101 Menu47 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr9_Status ,High ExtMI_Tmr9_Status,ND
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       34?? 34?? 34?? 
       34?? 34FF 
0178   3401 34FF 3400 00102 Menu48 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr9_Flood  ,High ExtMI_Tmr9_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
0180   34FF 34FF 3400 00103 Menu49 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr9_Drain  ,High ExtMI_Tmr9_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00104 ;tmr10
0188   3400 34FF 3400 00105 Menu50 dt       UI,ND,0, low StatusTxt,High StatusTxt,Low ExtMI_Tmr10_Status ,High ExtMI_Tmr10_Status,ND
       34?? 34?? 34?? 
       34?? 34FF 
0190   3401 34FF 3400 00106 Menu51 dt       MI,ND,0, low FloodTxt ,High FloodTxt ,Low ExtMI_Tmr10_Flood  ,High ExtMI_Tmr10_Flood,ND
       34?? 34?? 34?? 
       34?? 34FF 
0198   34FF 34FF 3400 00107 Menu52 dt       LI,ND,0, low DrainTxt ,High DrainTxt ,Low ExtMI_Tmr10_Drain  ,High ExtMI_Tmr10_Drain,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00108 
                      00109 ;Set FS Delay
01A0   3400 34FF 3400 00110 Menu53 dt       UI,ND,0,low M53,High M53,Low Set_UFSw,High Set_UFSw,ND
       34?? 34?? 34?? 
       34?? 34FF 
01A8   34FF 34FF 3400 00111 Menu54 dt       LI,ND,0,low M54,High M54,Low Set_LFSw,High Set_LFSw,ND
       34?? 34?? 34?? 
       34?? 34FF 
                      00112 
                      00113 ;Manually Operate
01B0   3400 34FF 3406 00114 Menu55 dt       UI,ND,.6,low M55,High M55,ND,ND,ND
       34?? 34?? 34FF 
       34FF 34FF 
01B8   3401 34FF 3407 00115 Menu56 dt       MI,ND,.7,low M56,High M56,ND,ND,ND
       34?? 34?? 34FF 
       34FF 34FF 
01C0   34FF 34FF 3408 00116 Menu57 dt       LI,ND,.8,low M57,High M57,ND,ND,ND
       34?? 34?? 34FF 
       34FF 34FF 
                      00117 
                      00118 ; ------------------------------------ 
                      00119 ; Extended Menu Item Table
                      00120 ; Byte1: Number of Variables
                      00121 ; Byte2: Variable Table Offset
                      00122 ; Byte3: Variable Table Segment
                      00123 ; Byte4: Text Offset
                      00124 ; Byte5: Text Segment
                      00125 ; Byte6: Cursor Table Offset
                      00126 ; Byte7: Cursor Table Segment
                      00127 ; Byte8: State Machine
                      00128 ; ------------------------------------ 
                      00129 
01C8   3401 34?? 34?? 00130 Cycle_Tmr_Status        dt 1,Low CycleTmrVarS , High CycleTmrVarS  ,Low StatusText , High StatusText ,Lo
                            w CursorOnOff,High CursorOnOff,1
       34?? 34?? 34?? 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       34?? 3401 
01D0   3402 34?? 34?? 00131 Cycle_Tmr_Start         dt 2,Low CycleTmrVarSR, High CycleTmrVarSR ,Low TimeText  , High TimeText  ,Low 
                            CursorTime ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
01D8   3402 34?? 34?? 00132 Cycle_Tmr_Stop          dt 2,Low CycleTmrVarSP, High CycleTmrVarSP ,Low TimeText   , High TimeText   ,Lo
                            w CursorTime ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
01E0   3401 34?? 34?? 00133 Cycle_Tmr_Flood         dt 1,Low CycleTmrVarF , High CycleTmrVarF  ,Low MinText , High MinText ,Low Curs
                            orCycle ,High CursorCycle ,1
       34?? 34?? 34?? 
       34?? 3401 
01E8   3402 34?? 34?? 00134 Cycle_Tmr_Drain         dt 2,Low CycleTmrVarD , High CycleTmrVarD  ,Low TimeText , High TimeText ,Low Cu
                            rsorTime ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00135 
01F0   3401 34?? 34?? 00136 ExtMI_Tmr1_Status dt 1,Low VarTbl_Tmr1S, High VarTbl_Tmr1S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
01F8   3402 34?? 34?? 00137 ExtMI_Tmr1_Flood  dt 2,Low VarTbl_Tmr1F, High VarTbl_Tmr1F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
0200   3402 34?? 34?? 00138 ExtMI_Tmr1_Drain  dt 2,Low VarTbl_Tmr1D, High VarTbl_Tmr1D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00139  
0208   3401 34?? 34?? 00140 ExtMI_Tmr2_Status dt 1,Low VarTbl_Tmr2S, High VarTbl_Tmr2S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
0210   3402 34?? 34?? 00141 ExtMI_Tmr2_Flood  dt 2,Low VarTbl_Tmr2F, High VarTbl_Tmr2F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
0218   3402 34?? 34?? 00142 ExtMI_Tmr2_Drain  dt 2,Low VarTbl_Tmr2D, High VarTbl_Tmr2D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00143 
0220   3401 34?? 34?? 00144 ExtMI_Tmr3_Status dt 1,Low VarTbl_Tmr3S, High VarTbl_Tmr3S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
0228   3402 34?? 34?? 00145 ExtMI_Tmr3_Flood  dt 2,Low VarTbl_Tmr3F, High VarTbl_Tmr3F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
0230   3402 34?? 34?? 00146 ExtMI_Tmr3_Drain  dt 2,Low VarTbl_Tmr3D, High VarTbl_Tmr3D,Low TimeText , High TimeText ,Low CursorTime 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00147 
0238   3401 34?? 34?? 00148 ExtMI_Tmr4_Status dt 1,Low VarTbl_Tmr4S, High VarTbl_Tmr4S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
0240   3402 34?? 34?? 00149 ExtMI_Tmr4_Flood  dt 2,Low VarTbl_Tmr4F, High VarTbl_Tmr4F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
0248   3402 34?? 34?? 00150 ExtMI_Tmr4_Drain  dt 2,Low VarTbl_Tmr4D, High VarTbl_Tmr4D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00151 
0250   3401 34?? 34?? 00152 ExtMI_Tmr5_Status dt 1,Low VarTbl_Tmr5S, High VarTbl_Tmr5S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
0258   3402 34?? 34?? 00153 ExtMI_Tmr5_Flood  dt 2,Low VarTbl_Tmr5F, High VarTbl_Tmr5F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
0260   3402 34?? 34?? 00154 ExtMI_Tmr5_Drain  dt 2,Low VarTbl_Tmr5D, High VarTbl_Tmr5D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00155 
0268   3401 34?? 34?? 00156 ExtMI_Tmr6_Status dt 1,Low VarTbl_Tmr6S, High VarTbl_Tmr6S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
0270   3402 34?? 34?? 00157 ExtMI_Tmr6_Flood  dt 2,Low VarTbl_Tmr6F, High VarTbl_Tmr6F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
0278   3402 34?? 34?? 00158 ExtMI_Tmr6_Drain  dt 2,Low VarTbl_Tmr6D, High VarTbl_Tmr6D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00159 
0280   3401 34?? 34?? 00160 ExtMI_Tmr7_Status dt 1,Low VarTbl_Tmr7S, High VarTbl_Tmr7S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
0288   3402 34?? 34?? 00161 ExtMI_Tmr7_Flood  dt 2,Low VarTbl_Tmr7F, High VarTbl_Tmr7F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
0290   3402 34?? 34?? 00162 ExtMI_Tmr7_Drain  dt 2,Low VarTbl_Tmr7D, High VarTbl_Tmr7D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       34?? 34?? 34?? 
       34?? 3401 
                      00163 
0298   3401 34?? 34?? 00164 ExtMI_Tmr8_Status dt 1,Low VarTbl_Tmr8S, High VarTbl_Tmr8S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
02A0   3402 34?? 34?? 00165 ExtMI_Tmr8_Flood  dt 2,Low VarTbl_Tmr8F, High VarTbl_Tmr8F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
02A8   3402 34?? 34?? 00166 ExtMI_Tmr8_Drain  dt 2,Low VarTbl_Tmr9D, High VarTbl_Tmr8D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00167 
02B0   3401 34?? 34?? 00168 ExtMI_Tmr9_Status dt 1,Low VarTbl_Tmr9S, High VarTbl_Tmr9S,Low StatusText, High StatusText,Low CursorOnO
                            ff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
02B8   3402 34?? 34?? 00169 ExtMI_Tmr9_Flood  dt 2,Low VarTbl_Tmr9F, High VarTbl_Tmr9F,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
02C0   3402 34?? 34?? 00170 ExtMI_Tmr9_Drain  dt 2,Low VarTbl_Tmr9D, High VarTbl_Tmr9D,Low TimeText , High TimeText ,Low CursorTime 
                            ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00171 
02C8   3401 34?? 34?? 00172 ExtMI_Tmr10_Status dt 1,Low VarTbl_Tmr10S, High VarTbl_Tmr10S,Low StatusText, High StatusText,Low Cursor
                            OnOff,High CursorOnOff,1
       34?? 34?? 34?? 
       34?? 3401 
02D0   3402 34?? 34?? 00173 ExtMI_Tmr10_Flood  dt 2,Low VarTbl_Tmr10F, High VarTbl_Tmr10F,Low TimeText , High TimeText ,Low CursorTi
                            me ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
02D8   3402 34?? 34?? 00174 ExtMI_Tmr10_Drain  dt 2,Low VarTbl_Tmr10D, High VarTbl_Tmr10D,Low TimeText , High TimeText ,Low CursorTi
                            me ,High CursorTime ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00175 
02E0   3403 34?? 34?? 00176 Set_Time dt 3,Low TimeVar, High TimeVar,Low ClockText , High ClockText ,Low CursorFullTime ,High CursorF
                            ullTime ,5
       34?? 34?? 34?? 
       34?? 3405 
02E8   3401 34?? 34?? 00177 Set_UFSw dt 1,Low UFSwVar, High UFSwVar,Low DecText , High DecText ,Low CursorFSw ,High CursorFSw ,1
       34?? 34?? 34?? 
       34?? 3401 
02F0   3401 34?? 34?? 00178 Set_LFSw dt 1,Low LFSwVar, High LFSwVar,Low DecText , High DecText ,Low CursorFSw ,High CursorFSw ,1
       34?? 34?? 34?? 
       34?? 3401 
                      00179 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00180 
                      00181 
                      00182 ; ------------------------------------ 
                      00183 ; Variables Data Table
                      00184 ;Byte1: EEPROM address
                      00185 ;Byte2: Datatype
                      00186 ;Byte3: Min Value
                      00187 ;Byte4: Max Value
                      00188 ; ------------------------------------ 
02F8                  00189 VarTable
02F8   3400 3401 3400 00190 VarTbl_Tmr1F    dt  .0,Decimal,0x00,0x17;hh
       3417 
02FC   3401 3401 3400 00191                                 dt  .1,Decimal,0x00,0x3b;mm
       343B 
0300   3402 3401 3400 00192 VarTbl_Tmr1D    dt  .2,Decimal,0x00,0x17;hh
       3417 
0304   3403 3401 3400 00193                                 dt  .3,Decimal,0x00,0x3b;mm
       343B 
0308   3404 3403 3400 00194 VarTbl_Tmr1S    dt  .4,OnOff,0x00,0x01; On/Off
       3401 
                      00195 
030C   3405 3401 3400 00196 VarTbl_Tmr2F    dt  .5,Decimal,0x00,0x17;hh
       3417 
0310   3406 3401 3400 00197                                 dt  .6,Decimal,0x00,0x3b;mm
       343B 
0314   3407 3401 3400 00198 VarTbl_Tmr2D    dt  .7,Decimal,0x00,0x17;hh
       3417 
0318   3408 3401 3400 00199                                 dt  .8,Decimal,0x00,0x3b;mm
       343B 
031C   3409 3403 3400 00200 VarTbl_Tmr2S    dt  .9,OnOff,0x00,0x01; On/Off
       3401 
                      00201 
0320   340A 3401 3400 00202 VarTbl_Tmr3F    dt  .10,Decimal,0x00,0x17;hh
       3417 
0324   340B 3401 3400 00203                                 dt  .11,Decimal,0x00,0x3b;mm
       343B 
0328   340C 3401 3400 00204 VarTbl_Tmr3D    dt  .12,Decimal,0x00,0x17;hh
       3417 
032C   340D 3401 3400 00205                                 dt  .13,Decimal,0x00,0x3b;mm
       343B 
0330   340E 3403 3400 00206 VarTbl_Tmr3S    dt  .14,OnOff,0x00,0x01; On/Off
       3401 
                      00207 
0334   340F 3401 3400 00208 VarTbl_Tmr4F    dt  .15,Decimal,0x00,0x17;hh
       3417 
0338   3410 3401 3400 00209                                 dt  .16,Decimal,0x00,0x3b;mm
       343B 
033C   3411 3401 3400 00210 VarTbl_Tmr4D    dt  .17,Decimal,0x00,0x17;hh
       3417 
0340   3412 3401 3400 00211                                 dt  .18,Decimal,0x00,0x3b;mm
       343B 
0344   3413 3403 3400 00212 VarTbl_Tmr4S    dt  .19,OnOff,0x00,0x01; On/Off
       3401 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00213 
0348   3414 3401 3400 00214 VarTbl_Tmr5F    dt  .20,Decimal,0x00,0x17;hh
       3417 
034C   3415 3401 3400 00215                                 dt  .21,Decimal,0x00,0x3b;mm
       343B 
0350   3416 3401 3400 00216 VarTbl_Tmr5D    dt  .22,Decimal,0x00,0x17;hh
       3417 
0354   3417 3401 3400 00217                                 dt  .23,Decimal,0x00,0x3b;mm
       343B 
0358   3418 3403 3400 00218 VarTbl_Tmr5S    dt  .24,OnOff,0x00,0x01; On/Off
       3401 
                      00219 
035C   3419 3401 3400 00220 VarTbl_Tmr6F    dt  .25,Decimal,0x00,0x17;hh
       3417 
0360   341A 3401 3400 00221                                 dt  .26,Decimal,0x00,0x3b;mm
       343B 
0364   341B 3401 3400 00222 VarTbl_Tmr6D    dt  .27,Decimal,0x00,0x17;hh
       3417 
0368   341C 3401 3400 00223                                 dt  .28,Decimal,0x00,0x3b;mm
       343B 
036C   341D 3403 3400 00224 VarTbl_Tmr6S    dt  .29,OnOff,0x00,0x01; On/Off
       3401 
                      00225 
0370   341E 3401 3400 00226 VarTbl_Tmr7F    dt  .30,Decimal,0x00,0x17;hh
       3417 
0374   341F 3401 3400 00227                                 dt  .31,Decimal,0x00,0x3b;mm
       343B 
0378   3420 3401 3400 00228 VarTbl_Tmr7D    dt  .32,Decimal,0x00,0x17;hh
       3417 
037C   3421 3401 3400 00229                                 dt  .33,Decimal,0x00,0x3b;mm
       343B 
0380   3422 3403 3400 00230 VarTbl_Tmr7S    dt  .34,OnOff,0x00,0x01; On/Off
       3401 
                      00231 
0384   3423 3401 3400 00232 VarTbl_Tmr8F    dt  .35,Decimal,0x00,0x17;hh
       3417 
0388   3424 3401 3400 00233                                 dt  .36,Decimal,0x00,0x3b;mm
       343B 
038C   3425 3401 3400 00234 VarTbl_Tmr8D    dt  .37,Decimal,0x00,0x17;hh
       3417 
0390   3426 3401 3400 00235                                 dt  .38,Decimal,0x00,0x3b;mm
       343B 
0394   3427 3403 3400 00236 VarTbl_Tmr8S    dt  .39,OnOff,0x00,0x01; On/Off
       3401 
                      00237 
0398   3428 3401 3400 00238 VarTbl_Tmr9F    dt  .40,Decimal,0x00,0x17;hh
       3417 
039C   3429 3401 3400 00239                                 dt  .41,Decimal,0x00,0x3b;mm
       343B 
03A0   342A 3401 3400 00240 VarTbl_Tmr9D    dt  .42,Decimal,0x00,0x17;hh
       3417 
03A4   342B 3401 3400 00241                                 dt  .43,Decimal,0x00,0x3b;mm
       343B 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

03A8   342C 3403 3400 00242 VarTbl_Tmr9S    dt  .44,OnOff,0x00,0x01; On/Off
       3401 
                      00243 
03AC   342D 3401 3400 00244 VarTbl_Tmr10F   dt  .45,Decimal,0x00,0x17;hh
       3417 
03B0   342E 3401 3400 00245                             dt  .46,Decimal,0x00,0x3b;mm
       343B 
03B4   342F 3401 3400 00246 VarTbl_Tmr10D   dt  .47,Decimal,0x00,0x17;hh
       3417 
03B8   3430 3401 3400 00247                                 dt  .48,Decimal,0x00,0x3b;mm
       343B 
03BC   3431 3403 3400 00248 VarTbl_Tmr10S   dt  .49,OnOff,0x00,0x01; On/Off
       3401 
                      00249 
03C0   3432 3401 3400 00250 TimeVar                 dt  .50,Decimal,0x00,0x17   ;hh
       3417 
03C4   3433 3401 3400 00251                             dt  .51,Decimal,0x00,0x3b   ;mm
       343B 
03C8   3434 3401 3400 00252                             dt  .52,Decimal,0x00,0x3b   ;ss
       343B 
                      00253 
03CC   3435 3401 3400 00254 UFSwVar                 dt  .53,Decimal,0x00,.99        ;sec
       3463 
03D0   3436 3401 3400 00255 LFSwVar                 dt  .54,Decimal,0x00,.99        ;sec
       3463 
                      00256 
03D4   3437 3403 3400 00257 CycleTmrVarS    dt      .55,OnOff  ,0x00,0x01;On/Off
       3401 
03D8   3438 3401 3400 00258 CycleTmrVarSR   dt  .56,Decimal,0x00,0x17;hh
       3417 
03DC   3439 3401 3400 00259                                 dt  .57,Decimal,0x00,0x3b;mm
       343B 
03E0   343A 3401 3400 00260 CycleTmrVarSP   dt  .58,Decimal,0x00,0x17;hh
       3417 
03E4   343B 3401 3400 00261                                 dt  .59,Decimal,0x00,0x3b;mm
       343B 
03E8   343C 3401 3400 00262 CycleTmrVarF    dt  .60,Decimal,0x00,.99;
       3463 
03EC   343D 3401 3400 00263 CycleTmrVarD    dt  .61,Decimal,0x00,.12; hh
       340C 
03F0   343E 3401 3400 00264                                 dt  .62,Decimal,0x00,.59; mm
       343B 
                      00265 ; ------------------------------------ ;
                      00266 ; Cursor Position Table
                      00267 ; each byte refers to X position on line 1. Should end with 0xFF
                      00268 ; ------------------------------------ 
03F4                  00269 CursorTable
03F4   34C2 34C5      00270 CursorTime              dt 0xc2,0xc5
03F6   34C2 34C5 34C8 00271 CursorFullTime  dt 0xc2,0xc5,0xc8
03F9                  00272 CursorCycle
03F9                  00273 CursorFSw
03F9   34C3           00274 CursorOnOff     dt 0xc3
                      00275                 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00276 
                      00277 ; ------------------------------------ 
                      00278 ; Text Table. Each text line must be terminated with 0 
                      00279 ; ------------------------------------ 
03FA                  00280 Text    
03FA   3453 3465 3474 00281 M1      dt "Set Clock",0
       3420 3443 346C 
       346F 3463 346B 
       3400 
0404   3453 3465 3474 00282 M2      dt "Set Timers",0
       3420 3454 3469 
       346D 3465 3472 
       3473 3400 
040F   3453 3465 3474 00283 M3      dt "Set FSw Delay",0
       3420 3446 3453 
       3477 3420 3444 
       3465 346C 3461 
       3479 3400 
041D   344D 3461 346E 00284 M4      dt "Man. Operation",0
       342E 3420 344F 
       3470 3465 3472 
       3461 3474 3469 
       346F 346E 3400 
042C   3445 3478 3469 00285 M5      dt "Exit",0
       3474 3400 
0431   3453 3465 3474 00286 M6      dt "Set Cycle Timer",0
       3420 3443 3479 
       3463 346C 3465 
       3420 3454 3469 
       346D 3465 3472 
       3400 
0441   3453 3465 3474 00287 M7      dt "Set ABS Timers",0
       3420 3441 3442 
       3453 3420 3454 
       3469 346D 3465 
       3472 3473 3400 
0450   3453 3465 3474 00288 M8      dt "Set Status",0
       3420 3453 3474 
       3461 3474 3475 
       3473 3400 
045B   3453 3465 3474 00289 M9      dt "Set Timer Start",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3453 3474 
       3461 3472 3474 
       3400 
046B   3453 3465 3474 00290 M10     dt "Set Timer Stop",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3453 3474 
       346F 3470 3400 
047A   3453 3465 3474 00291 M11     dt "Set Flood Cycle",0
       3420 3446 346C 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       346F 346F 3464 
       3420 3443 3479 
       3463 346C 3465 
       3400 
048A   3453 3465 3474 00292 M12     dt "Set Drain Cycle",0
       3420 3444 3472 
       3461 3469 346E 
       3420 3443 3479 
       3463 346C 3465 
       3400 
049A   3453 3465 3474 00293 M13     dt "Set Timer 1",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3431 3400 
04A6   3453 3465 3474 00294 M14     dt "Set Timer 2",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3432 3400 
04B2   3453 3465 3474 00295 M15     dt "Set Timer 3",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3433 3400 
04BE   3453 3465 3474 00296 M16     dt "Set Timer 4",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3434 3400 
04CA   3453 3465 3474 00297 M17     dt "Set Timer 5",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3435 3400 
04D6   3453 3465 3474 00298 M18     dt "Set Timer 6",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3436 3400 
04E2   3453 3465 3474 00299 M19     dt "Set Timer 7",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3437 3400 
04EE   3453 3465 3474 00300 M20     dt "Set Timer 8",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3438 3400 
04FA   3453 3465 3474 00301 M21     dt "Set Timer 9",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3439 3400 
0506   3453 3465 3474 00302 M22     dt "Set Timer 10",0
       3420 3454 3469 
       346D 3465 3472 
       3420 3431 3430 
       3400 
0513   3453 3465 3474 00303 M53     dt "Set UFSw Delay",0
       3420 3455 3446 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

       3453 3477 3420 
       3444 3465 346C 
       3461 3479 3400 
0522   3453 3465 3474 00304 M54     dt "Set LFSw Delay",0
       3420 344C 3446 
       3453 3477 3420 
       3444 3465 346C 
       3461 3479 3400 
0531   344D 3461 346E 00305 M55     dt "Manually Flood",0
       3475 3461 346C 
       346C 3479 3420 
       3446 346C 346F 
       346F 3464 3400 
0540   344D 3461 346E 00306 M56     dt "Manually Drain",0
       3475 3461 346C 
       346C 3479 3420 
       3444 3472 3461 
       3469 346E 3400 
054F   3453 3465 3474 00307 M57 dt "Set Idle",0
       3420 3449 3464 
       346C 3465 3400 
                      00308 
0558   3453 3465 3474 00309 StatusTxt       dt "Set Status",0
       3420 3453 3474 
       3461 3474 3475 
       3473 3400 
0563   3453 3465 3474 00310 FloodTxt        dt "Set Flood Time",0
       3420 3446 346C 
       346F 346F 3464 
       3420 3454 3469 
       346D 3465 3400 
0572   3453 3465 3474 00311 DrainTxt        dt "Set Drain Time",0
       3420 3444 3472 
       3461 3469 346E 
       3420 3454 3469 
       346D 3465 3400 
0581   3425 34C0 345B 00312 TimeText        dt "%",0xc0,"[HH:MM]",0
       3448 3448 343A 
       344D 344D 345D 
       3400 
058B   3425 34C0 345B 00313 DecText         dt "%",0xc0,"[000] Sec",0
       3430 3430 3430 
       345D 3420 3453 
       3465 3463 3400 
0597   3425 34C0 345B 00314 MinText         dt "%",0xc0,"[000] Min",0
       3430 3430 3430 
       345D 3420 344D 
       3469 346E 3400 
05A3   3425 34C0 345B 00315 ClockText       dt "%",0xc0,"[HH:MM:SS]",0
       3448 3448 343A 
       344D 344D 343A 
       3453 3453 345D 
       3400 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

05B0   3425 34C0 345B 00316 StatusText      dt "%",0xC0,"[ On]",0
       3420 344F 346E 
       345D 3400 
05B8   3425 3480 3446 00317 FloodingText dt "%",0x80, "Flooding...",0
       346C 346F 346F 
       3464 3469 346E 
       3467 342E 342E 
       342E 3400 
05C6   3425 3480 3444 00318 DrainingText dt "%",0x80, "Draining...",0
       3472 3461 3469 
       346E 3469 346E 
       3467 342E 342E 
       342E 3400 
05D4   3425 3480 3449 00319 IdlingText dt "%",0x80, "Idling...",0
       3464 346C 3469 
       346E 3467 342E 
       342E 342E 3400 
                      00320 
                      00321 ;M665   dt "Hydro+",0
                      00322 ;M666   dt "Firmware v4.40",0
                      00323 
                      00324 
                      00325 
05E0   3420 3400      00326 BlancLine dt " ",0 ; dt produces multiple RETLW with byte -> retlw 'L', retlw 'E',retlw 'N'...
05E2   3459 3465 3473 00327 MYes    dt "Yes",0
       3400 
05E6   344E 346F 3400 00328 MNo     dt "No",0
05E9   344F 344E 3400 00329 MOn             dt "ON",0
05EC   344F 3446 3446 00330 MOff    dt "OFF",0
       3400 
                      00331 
                      00332 
                      00333 
                      00004 
Warning[205]: Found directive in column 1. (__config)
2007   1E10           00005 __config  _INTOSC_OSC_NOCLKOUT & _LVP_OFF & _WDT_OFF & _PWRTE_ON & _BOREN_OFF & _BODEN_OFF & _MCLRE_OFF 
                            & DATA_CP_ON & _CP_ON  
                      00006 
Warning[205]: Found directive in column 1. (errorlevel)
                      00007 errorlevel 2
                      00008  ;ERRORLEVEL -224 ; suppress annoying message because of tris
                      00009  ;ERRORLEVEL -302 ; suppress message because of page change
                      00010    
                      00011 
  0000                00012 Extern Hex2Dec 
  0000                00013 Extern BCD
  0000                00014 Extern LCD_cmd
  0000                00015 Extern LCD_chr
  0000                00016 Extern LCD_Init
                      00017 ;Extern LCD_Clear
                      00018 
  0000                00019 Extern Delay
  0000                00020 Extern BuildCustomChars
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                00021 Extern PrintLCDVariable
  0000                00022 Extern RefreshLCD
  0000                00023 Extern ShowActiveAlarms
                      00024 
                      00025 
  0000                00026 Extern Bcd2Hex
  0000                00027 Extern ShowTimeAndStatus
                      00028 
                      00029 ;Extern Variables
  0000                00030 Extern Tens,Ones
                      00031 
  0000                00032 Extern CheckWaterStatus
                      00033 
                      00034 ;From ReadTables.asm
  0000                00035 Extern ReadVarTable
  0000                00036 Extern ReadExtMenuItem
  0000                00037 Extern ReadCursorTbl
  0000                00038 Extern ReadMenuTable
                      00039 
                      00040 ;From EEPROM.asm
  0000                00041 Extern EEPROM_Read
  0000                00042 Extern EEPROM_Write
  0000                00043 Extern WriteDatatoEEPROM
                      00044 
                      00045 
                      00046 
  0000                00047 Extern TimeValue
  0000                00048 Extern ActiveTimer
  0000                00049 Extern AlarmCHK
                      00050 
                      00051 ;From I2C
  0000                00052 Extern Check_RTC
  0000                00053 Extern Read_DS1307
  0000                00054 Extern Initialize_RTC
  0000                00055 Extern Write_DS1307
  0000                00056 Extern I2C_Init
  0000                00057 Extern SEC
  0000                00058 Extern MIN
  0000                00059 Extern HOUR
                      00060 
  0000                00061         Extern I2C_Start
  0000                00062         Extern I2C_Write
  0000                00063         Extern I2C_Stop
                      00064 
                      00065 
  0000                00066 Global RelativeColumn
  0000                00067 Global Column
  0000                00068 Global CursorPos
  0000                00069 Global EEPROM_Address  
  0000                00070 Global EEPROM_Data 
  0000                00071 Global EEPROM_DataType 
  0000                00072 Global EEPROM_Min               
  0000                00073 Global EEPROM_Max       
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

  0000                00074 Global CursorPos 
  0000                00075 Global ExtMenuItem
                      00076 
  0000                00077 Global WaterStatus
  0000                00078 Global OldWaterStatus
                      00079 
                      00080 
  0000                00081 Global TMR1Delay
  0000                00082 Global UFSwDelay
  0000                00083 Global LFSwDelay
                      00084 
  0000                00085 Global VarTbl_PCLATH
  0000                00086 Global VarTbl_PCL
  0000                00087 Global ExtMenuItem
  0000                00088 Global ExtMenuItem_Offset
  0000                00089 Global ExtMenuItem_Segment
  0000                00090 Global CursorPos
  0000                00091 Global MenuItem
                      00092 
  0000                00093 Global MenuItemTbl;label
  0000                00094 Global Blink
                      00095 
                      00096 
                      00097 ; ------------------------------------ 
                      00098 ; Menu Items Data Table
                      00099 ;Byte1: Menu Position
                      00100 ;Byte2: Menu on Enter
                      00101 ;Byte3: Routine One Enter
                      00102 ;Byte4: Pointer to Text String - PCL
                      00103 ;Byte5: Pointer to Text String - PCLATH
                      00104 ;Byte6: Pointer to Extended Variable Table - PCL
                      00105 ;Byte7: Pointer to Extended Variable Table - PCLATH
                      00106 ; ------------------------------------ 
                      00107 
                      00108 #Define Menu_POS                        MenuItem+0
                      00109 #Define Menu_MenuOnEnter        MenuItem+1
                      00110 #Define Menu_RoutineOnEnter     MenuItem+2
                      00111 #Define Menu_TextOffset         MenuItem+3
                      00112 #Define Menu_TextSegment        MenuItem+4
                      00113 #Define Menu_ExtMenuOffset  MenuItem+5
                      00114 #Define Menu_ExtMenuSegment MenuItem+6
                      00115 #Define Menu_Reserved           MenuItem+7
                      00116 
                      00117 
                      00118 #Define ExtMenu_VarNum                          ExtMenuItem+0
                      00119 #Define ExtMenu_VarOffset                       ExtMenuItem+1
                      00120 #Define ExtMenu_VarSegment                      ExtMenuItem+2
                      00121 #Define ExtMenu_TextOffset                      ExtMenuItem+3
                      00122 #Define ExtMenu_TextSegment             ExtMenuItem+4
                      00123 #Define ExtMenu_CursorTblOffset         ExtMenuItem+5
                      00124 #Define ExtMenu_CursorTblSegment        ExtMenuItem+6
                      00125 #Define ExtMenu_StateMachine            ExtMenuItem+7
                      00126 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00127 
                      00128 
                      00129 #Define Tmr0  0
                      00130 #Define Tmr1  1
                      00131 
                      00132 #Define FloodPump PORTA,7
                      00133 #Define DrainPump PORTA,6
                      00134 
                      00135 
                      00136 
                      00137 
                      00138 Temp_Variables Udata_OVR
0000                  00139 i Res 1
0001                  00140 c Res 1
0002                  00141 tmp3 Res 1
0003                  00142 W_Old Res 1
0004                  00143 TmpVar Res 1
0005                  00144 ExtMenuItem_Offset Res 1
0006                  00145 ExtMenuItem_Segment Res 1
                      00146 
                      00147 
                      00148 Bank0 udata 
0000                  00149         tmp  Res 1
0001                  00150         tmp2 Res 1
                      00151 
0002                  00152         Line  Res 1
                      00153 
0003                  00154         OldLine Res 4; Should be increased if menu depdth is increase (sub menus in a row)
0007                  00155         OldMenu Res 4; 
000B                  00156         OldStateMachine Res 1;  
                      00157 
000C                  00158         Menu  Res 1
000D                  00159         MenuItem  Res 0x08 ; Holds the Menu Item Table
0015                  00160         Column    Res 1
0016                  00161         MenuDepth Res 1
0017                  00162         ExtMenuItem Res 0x0A ; Holds the Extended menu Item Table
0021                  00163         RelativeColumn Res 1
0022                  00164         StateMachine   Res 1
0023                  00165         Counter  Res 1;Menu Variable
0024                  00166         KeyPressed  Res 1; Interrupt Variable! SOS dont touch!
0025                  00167         LCD_tmp  Res 1
0026                  00168         VarTbl_PCLATH  Res 1
0027                  00169         VarTbl_PCL  Res 1
                      00170 
0028                  00171         TextSegment Res 1
0029                  00172         TextOffset  Res 1
                      00173 
002A                  00174         ChangeFlag Res 1
002B                  00175         PCLATH_OLD res 1
002C                  00176         INTFlag res 1
002D                  00177         WaterStatus Res 1
002E                  00178         OldWaterStatus Res 1
002F                  00179         dx0 res 1
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0030                  00180         dx1 res 1
0031                  00181         Flag res 1
                      00182 
0032                  00183 TMR1Delay res 1
0033                  00184 UFSwDelay res 1
0034                  00185 LFSwDelay res 1
0035                  00186 Blink res 1
0036                  00187 BlinkCnt res 1
0037                  00188 tmpDelay res 1
0038                  00189 ESC_Hold res 1
                      00190 
                      00191 Bank1 udata
0000                  00192         EEPROM_Address  Res 0x08 
0008                  00193         EEPROM_Data     Res 0x08
0010                  00194         EEPROM_DataType Res 0x08
0018                  00195         EEPROM_Min              Res 0x08
0020                  00196         EEPROM_Max              Res 0x08
0028                  00197         CursorPos               Res 0x08
                      00198 
                      00199 ;Bank2 udata
                      00200 ;       ROM_Data res .70
                      00201 
                      00202 SharedMem Udata
0000                  00203         W_TEMP Res 1
0001                  00204         STATUS_TEMP Res 1 ; Interrupt Variables
                      00205 
                      00206 
                      00207 START Code   ;org sets the origin, 0x0000 for the 16F628,this is where the program starts running       
0000   2???           00208 goto main
                      00209 
                      00210 INT_Handler Code 
                      00211 
0000   00??           00212         movwf W_TEMP    ; movwf does not alter STATUS
0001   0E03           00213         swapf STATUS,W  ; move Status to W without affecting flags. The saved value is swapped
0002   1283           00214         BCF STATUS,RP0
0003   00??           00215         movwf STATUS_TEMP
0004   080A           00216         movf PCLATH,W   ;save PCLATH
0005   00??           00217         movwf PCLATH_OLD
0006   ????           00218         pagesel $
0007   0183           00219         clrf STATUS
                      00220 
                      00221         
                      00222         ; Check which interrupt occured
                      00223         ; RB7:4 Int occured?
0008   1C0B           00224         BTFSS INTCON,RBIF
0009   2???           00225         Goto CheckTMR0
000A   0806           00226         movf PORTB,W
000B   39F0           00227         andlw 0xF0 ;check only RB4 to RB7
000C   00??           00228         movwf KeyPressed
                      00229 
                      00230 
                      00231         ;movlw 0x04 ; Software Push buttons Debouncing. Wait for 40ms and recheck keys
                      00232         ;call Delay ; then accept the ports state. 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

000D   3004           00233         movlw 0x04
000E   00??           00234         movwf tmpDelay
000F                  00235 DelayLoop
000F   301F           00236         movlw   0x1F
0010   00??           00237         movwf   dx0
0011   3008           00238         movlw   0x08
0012   00??           00239         movwf   dx1
0013                  00240 XDelay_0
0013   0B??           00241         decfsz  dx0, f
0014   2???           00242         goto    $+2
0015   0B??           00243         decfsz  dx1, f
0016   2???           00244         goto    XDelay_0
                      00245 
                      00246                         ;2 cycles
0017   2???           00247         goto    $+1
                      00248 
0018   0806           00249         movf PORTB,W
0019   39F0           00250         andlw 0xF0 ;check only RB4 to RB7
001A   06??           00251         xorwf KeyPressed,W
001B   1903           00252         btfsc STATUS,Z
001C   2???           00253         goto $+4
001D   0B??           00254         decfsz tmpDelay
001E   2???           00255         goto DelayLoop
001F   01??           00256         clrf KeyPressed 
                      00257 
                      00258 
0020   100B           00259         bcf INTCON,RBIF ;clear int RB7:RB4 flag 
0021   2???           00260         goto ExitInt
                      00261 
0022                  00262 CheckTMR0:
                      00263 ;Tmr0 Int Occured?
                      00264 ;Triggers the INTFlag to check if an alarm occured.
0022   1D0B           00265         BTFSS INTCON,T0IF
0023   2???           00266         goto CheckTMR1
                      00267 
0024   3001           00268         movlw 0x01
0025   00??           00269         movwf INTFlag
                      00270 
0026   0B??           00271         decfsz BlinkCnt
0027   2???           00272         goto ExitTmr0
                      00273 
0028   03??           00274         decf Blink,W
0029   3AFF           00275         xorlw 0xFF
002A   3004           00276         movlw 0x4
002B   1903           00277         btfsc STATUS,Z
002C   00??           00278         movwf Blink
002D   03??           00279         decf Blink
002E   3004           00280         movlw 0x04 ; to reduce the small alarm font rotation to 1/4 sec
002F   00??           00281         movwf BlinkCnt
0030                  00282 ExitTmr0:
0030   110B           00283         bcf INTCON,T0IF ;clear Tmr0 Flag
0031   2???           00284         goto ExitInt
                      00285 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0032                  00286 CheckTMR1:
                      00287         ;Tmr1 Int Occured?
0032   1C0C           00288         BTFSS PIR1,TMR1IF
0033   2???           00289         goto ExitInt
0034   30DB           00290         movlw 0xdB ;0xdf
0035   008E           00291         movwf TMR1L
0036   300B           00292         movlw 0x0B
0037   008F           00293         movwf TMR1H
                      00294         
0038   08??           00295         movf TMR1Delay,F
0039   1D03           00296         btfss STATUS,Z
003A   03??           00297         decf TMR1Delay
003B   100C           00298         bcf PIR1,TMR1IF ;clear Tmr1 Flag
                      00299 
                      00300 
003C                  00301 ExitInt
003C   08??           00302         movf PCLATH_OLD,W
003D   008A           00303         movwf PCLATH            ;restore PCLATH
003E   0E??           00304         swapf STATUS_TEMP,W ; swap back status to W
003F   0083           00305         movwf STATUS            ; pop original value to status
0040   0E??           00306         swapf W_TEMP,F          ;swap back W value
0041   0E??           00307         swapf W_TEMP,W 
0042   0009           00308 retfie
                      00309 
                      00310 PROG1 Code
0000                  00311 main
                      00312 ; ------------------------------------ 
                      00313 ; initialization - set ports
                      00314 ; ------------------------------------ 
0000   3007           00315         movlw 0x07
0001   009F           00316         movwf CMCON   ;turn comparators off and enable pins for I/O functions
0002   1683           00317     bsf  STATUS, RP0    ;select bank 1
0003   30F6           00318     movlw  b'11110110'
0004   0086           00319     movwf  TRISB
0005   3000           00320     movlw  b'0'  
0006   0085           00321     movwf TRISA   ;set PortA all outputs
0007   1283           00322         bcf STATUS,RP0   ;select bank 0
0008   0185           00323         clrf PORTA
                      00324 
                      00325 ;OPTION REG
                      00326 ;bits 2-0: 1:256 TMR0 Prescaler
                      00327 ;bit 5: 0=internal instruction cycle clock for TMR0 source
                      00328 ;bit 6: 1= RB0/int on rising edge
                      00329 ;bit 7: 1=portb pull ups are disabled
                      00330 ; TMR0 overflows every 256 cycles and since the prescaler is 256, Tmr0's frequency will 
                      00331 ; be 1 Mhz/256/256=15,25Hz thus it will trigger every 1 sec / 15,25times/sec = 0,06557 sec = 65,57 msec
                      00332 ; Then a countdown timer (BlinkCnt) is used from inside the interrupt, that sets a flag on every 4 ticks
                      00333 ; of the clock, thus in about 1/4 sec, to make the Clock Font to rotate.
                      00334 
0009   30C7           00335         Movlw b'11000111'
000A   1683           00336     bsf  STATUS, RP0    ;select bank 1
000B   0081           00337     MOVWF OPTION_REG
000C   1283           00338         bcf STATUS,RP0   ;select bank 0
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00339         
                      00340         ;enable Interrupts
000D   018B           00341         CLRF INTCON 
000E   178B           00342         bsf INTCON,GIE
000F   158B           00343         bsf INTCON,RBIE
0010   168B           00344         bsf INTCON,T0IE ; Tmr0
0011   170B           00345         bsf INTCON,PEIE; Enable Periferal Ints
                      00346         
0012   3020           00347         MOVLW 0x20;100 ms delay
0013   2???           00348         call Delay 
0014   2???           00349         Call I2C_Init
0015   2???           00350         Call LCD_Init
0016   300A           00351         MOVLW 0x0A;100 ms delay
0017   2???           00352         Call Delay 
                      00353 
0018   ????           00354         Pagesel BuildCustomChars
0019   2???           00355         Call BuildCustomChars ; Build custom characters
001A   ????           00356         Pagesel $       
                      00357 
                      00358         ;If RTC is not initialized, then initialize it
001B   2???           00359         Call Check_RTC
001C   3A00           00360         xorlw 0x00
001D   1D03           00361         btfss STATUS,Z
001E   2???           00362         Call Initialize_RTC
                      00363 
001F   01??           00364         clrf WaterStatus
0020   01??           00365         clrf OldWaterStatus
0021   01??           00366         clrf TMR1Delay  
                      00367 
                      00368 
                      00369 ; Timer1 will overflow after FFFF-BDB =F424 = 62500 cycles.
                      00370 ; Since the prescaler is 8, then 1.000.000 hz / 62500 / 8 = 2 Hz 
                      00371 ; Thus is will trigger every 1sec/2 = 0.5 sec = 500 ms
                      00372 ; It is used to count down the float switches delay
0022   3030           00373         movlw b'00110000'
0023   0090           00374         movwf T1CON ; enable TMR1, prescaler 8
0024   30DB           00375         movlw 0xDB;
0025   008E           00376         movwf TMR1L;
0026   300B           00377         movlw 0x0B;
0027   008F           00378         movwf TMR1H; set TMR1 to trigger every 0,5 sec
                      00379 
                      00380 
                      00381 ;Set Tmr2 to drive LCD contrast
                      00382 ;using different duty cycles
0028   0192           00383         clrf    T2CON
0029   0191           00384         clrf    TMR2
002A   1683           00385         bsf     STATUS,RP0
002B   018C           00386         clrf    PIE1 ;clear all periferal ints
002C   140C           00387         bsf PIE1,TMR1IE ; enable only tmr1 int
002D   1283           00388         bcf     STATUS,RP0
002E   018C           00389         clrf    PIR1
002F   1683           00390         bsf     STATUS,RP0
0030   3080           00391         movlw   0x80
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0031   0092           00392         movwf   PR2     ; compare with 255
0032   1283           00393         bcf     STATUS,RP0
0033   301E           00394         movlw   (3 * 0x0A)
0034   0095           00395         movwf   CCPR1L ; adjusts contrast
0035   3004           00396         movlw   0x04
0036   0092           00397         movwf   T2CON    ; prescaler 1:16 and postscaler 1:1
0037   303C           00398         movlw   0x3C
0038   0097           00399         movwf   CCP1CON
0039   1512           00400         bsf     T2CON,TMR2ON
                      00401 
                      00402 
                      00403 
003A   3003           00404         Movlw 0x03
003B   00??           00405         Movwf StateMachine
                      00406         ;movlw 0x0A
                      00407         ;movwf UFSwDelay
                      00408         ;movlw 0x06
                      00409         ;movwf LFSwDelay
                      00410         ;clrf WaterStatus
003C   01??           00411         clrf KeyPressed
                      00412 
003D   3001           00413         movlw 1
003E   00??           00414         movwf INTFlag
003F   3003           00415         movlw 3
0040   00??           00416         movwf Blink
0041   3006           00417         movlw 0x06
0042   00??           00418         movwf BlinkCnt
                      00419 
                      00420 
                      00421 
                      00422 
                      00423 
                      00424 
                      00425 
                      00426 ; ------------------------------------ 
                      00427 ; Endless Menu Loop
                      00428 ; ------------------------------------ 
0043   2???           00429 Call I2C_Start
                      00430 
                      00431 ;Call LoadTime
                      00432 ;Call SaveTime
0044                  00433 MenuLoop
0044   08??           00434         movf INTFlag,F
0045   1903           00435         btfsc STATUS,Z
0046   2???           00436         goto LoopCont
                      00437         ;Disable Interrupts to do all checkings and mess with I2C
0047   138B           00438         bcf INTCON,GIE
0048   2???           00439         Call Read_DS1307
                      00440 
0049   2???           00441         Call ActiveTimer ;Checks Repeative Timer
004A   00??           00442         movwf WaterStatus
004B   2???           00443         Call AlarmCHK 
                      00444         
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 24


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

004C   3AFF           00445         xorlw Idle 
004D   1903           00446         btfsc STATUS,Z
004E   2???           00447         Goto ABS_Idle
004F                  00448 ABSNotIDLE:
004F   3AFF           00449         xorlw Idle
0050   09??           00450         comf WaterStatus,F
0051   1D03           00451         btfss STATUS,Z ;if zero then Cycle Tmr WaterStatus=IDLE
0052   2???           00452         Goto ORThem
                      00453 ;Cycle IDle then Return ABS
0053   00??           00454         movwf WaterStatus
0054   2???           00455         Goto ExitWaterStatusFlowChart
0055                  00456 ORThem:
                      00457         ; Give always priority to the Repetive timer.
                      00458         ; WaterSatus set by the Rep timer Changes only when it's status is Drain
                      00459         ; and the ABS timer sets the status to Flood. In every other case it
                      00460         ; stays unchanged. That's why it is OR'ed
0055   09??           00461         comf WaterStatus,F
0056   04??           00462         iorwf WaterStatus,F 
0057   2???           00463         Goto ExitWaterStatusFlowChart
0058                  00464 ABS_Idle:
0058   09??           00465         comf WaterStatus,F
0059   1903           00466         btfsc STATUS,Z ;if zero then Cycle Tmr WaterStatus=IDLE
005A   2???           00467         Goto Cycle_Idle 
005B   09??           00468         comf WaterStatus,F  ; Returns CycleTimer's original Water Status
005C   2???           00469         Goto ExitWaterStatusFlowChart
005D                  00470 Cycle_Idle:
                      00471         ;both are Idle
005D   30FF           00472         movlw Idle
005E   00??           00473         movwf WaterStatus
005F                  00474 ExitWaterStatusFlowChart:
005F   01??           00475         Clrf INTFlag            ;
0060   178B           00476         bsf INTCON,GIE
                      00477         ;Re-enable Interrupts
                      00478 
                      00479 
0061                  00480 LoopCont:
                      00481 
0061   30??           00482         movlw High UFSwVar
0062   008A           00483         movwf PCLATH
                      00484         ;pagesel UFSwVar
0063   2???           00485         Call UFSwVar
0064   ????           00486         Pagesel $
0065   2???           00487         Call EEPROM_Read
                      00488         ;movlw 4
0066   00??           00489         movwf UFSwDelay
                      00490 
0067   30??           00491         movlw High LFSwVar
0068   008A           00492         movwf PCLATH
0069   2???           00493         Call LFSwVar
006A   ????           00494         Pagesel $
006B   2???           00495         Call EEPROM_Read
                      00496         ;movlw 4
006C   00??           00497         movwf LFSwDelay
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 25


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00498 
006D   2???           00499         Call CheckWaterStatus
                      00500 
006E   08??           00501         movf StateMachine,W
006F   3A03           00502         xorlw 0x03
0070   1903           00503         btfsc STATUS,Z
0071   2???           00504         Call InitialSCR 
                      00505 
                      00506 
0072   08??           00507         movf KeyPressed,W
0073   1D03           00508         btfSS STATUS,Z
0074   2???           00509         goto $+2
0075   2???           00510         goto MenuLoop
                      00511 
0076   08??           00512         movf KeyPressed,W ; Check For Esc & Up
0077   3AA0           00513         xorlw UpEsc
0078   1903           00514         BTFSC STATUS,Z
0079   2???           00515         goto $+2
007A   2???           00516         goto $+4
007B   01??           00517         Clrf KeyPressed
007C   2???           00518         Call UpAndEsc
007D   2???           00519         Goto MenuLoop
                      00520 
007E   08??           00521         movf KeyPressed,W ; Check For Enter & UP
007F   3A60           00522         xorlw UpEnter   
0080   1903           00523         BTFSC STATUS,Z
0081   2???           00524         goto $+2
0082   2???           00525         goto $+4
0083   01??           00526         Clrf KeyPressed
0084   2???           00527         Call IncContrast
0085   2???           00528         Goto MenuLoop
                      00529 
0086   08??           00530         movf KeyPressed,W ; Check For Enter & Down
0087   3A50           00531         xorlw DownEnter 
0088   1903           00532         BTFSC STATUS,Z
0089   2???           00533         goto $+2
008A   2???           00534         goto $+4
008B   01??           00535         Clrf KeyPressed
008C   2???           00536         Call DecContrast
008D   2???           00537         Goto MenuLoop
                      00538 
008E   1B00           00539         BTFSC KeyPressed,RB6
008F   2???           00540         goto $+2
0090   2???           00541         goto $+4
0091   01??           00542         Clrf KeyPressed
0092   2???           00543         Call KeyDown
0093   2???           00544         Goto MenuLoop
                      00545 
0094   1B80           00546         BTFSC KeyPressed,RB7
0095   2???           00547         goto $+2
0096   2???           00548         goto $+4
0097   01??           00549         Clrf KeyPressed
0098   2???           00550         Call KeyUp
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 26


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0099   2???           00551         Goto MenuLoop
                      00552 
009A   1A00           00553         BTFSC KeyPressed,RB4
009B   2???           00554         goto $+2
009C   2???           00555         goto $+4
009D   01??           00556         Clrf KeyPressed
009E   2???           00557         Call KeyEnter
009F   2???           00558         Goto MenuLoop
                      00559 
00A0   1A80           00560         BTFSC KeyPressed,RB5
00A1   2???           00561         goto $+2
00A2   2???           00562         goto $+3
00A3   01??           00563         Clrf KeyPressed
00A4   2???           00564         Call KeyExit
00A5   2???           00565 goto MenuLoop
                      00566 
                      00567 
                      00568 
                      00569 ; ------------------------------------ 
                      00570 ; Key Down
                      00571 ; Choose routine to execute based on StateMachine
                      00572 ;
                      00573 ; Use of Pagesel & PageselW directives
                      00574 ; When a Call or Goto is performed, PCLATH bits 4:3 are loaded to indicate the memory page ( 00,01,10,11
                             : up to 4 memory  
                      00575 ; pages) and the rest 11 bits, bits 10:0 are loaded to PC (13 bit addressing). Pagesel,uses BSF and BCF 
                            commands to set bits 4:3 of PCLATH 
                      00576 ; so we can use it before any far call or far goto, to be sure that the Program Counter will be on the r
                            ight memory page.
                      00577 ; If we want to make a computed jump (computed goto) by altering PCL register, then we need to also fix 
                            3 more bits,
                      00578 ; PCLATH bits 2:0 (so all PCLATH). Thus we can not use Pagesel. Instead, we can manually set PCLATH eith
                            er using Movwf
                      00579 ; instructions or by use of PageselW which does the same thing (uses WREG Commands istead of BCF/BSF) .
                      00580 ; Why this shit happens....
                      00581 ; Since PIC16 have 14 bit commands and Call & Goto commands, allocate 11 bits to hold the memory address
                             and 3 bits to be self expressed 
                      00582 ; (see table 15-2), then we need additional 2 bits to create a 13-bit address. These 2 bits are PCLATH 4
                            :3.
                      00583 ; 
                      00584 ; ------------------------------------ 
00A6                  00585 KeyDown
00A6   ???? ????      00586         PageselW KeyDownRoutineTable
00A8   30??           00587         movlw Low KeyDownRoutineTable
00A9   07??           00588         Addwf StateMachine,W
00AA   1803           00589         Btfsc STATUS,C
00AB   0A8A           00590         incf PCLATH
00AC   0082           00591         movwf PCL
00AD                  00592 KeyDownRoutineTable
00AD   2???           00593         Goto ScrollDown ;State Machine=0
00AE   2???           00594         Goto MoveLeft   ;State Machine=1
00AF   2???           00595         Goto DecVariable;State Machine=2
00B0   0008           00596         Return                  ;State Machine=3
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 27


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00B1   2???           00597         Goto BacktoMenu ;State Machine=4
00B2   2???           00598         Goto MoveLeft   ;State Machine=5
                      00599 
                      00600 ; ------------------------------------ 
                      00601 ; Key Up
                      00602 ; Choose routine to execute based on StateMachine
                      00603 ; ------------------------------------ 
00B3                  00604 KeyUp
00B3   ???? ????      00605         PageselW KeyUpRoutineTable
00B5   30??           00606         movlw Low KeyUpRoutineTable
00B6   07??           00607         Addwf StateMachine,W
00B7   1803           00608         Btfsc STATUS,C
00B8   0A8A           00609         incf PCLATH
00B9   0082           00610         movwf PCL
00BA                  00611 KeyUpRoutineTable
00BA   2???           00612         Goto ScrollUp    ;State Machine=0
00BB   2???           00613         Goto MoveRight   ;State Machine=1
00BC   2???           00614         Goto IncVariable ;State Machine=2
00BD   0008           00615         Return                   ;State Machine=3
00BE   2???           00616         Goto BacktoMenu  ;State Machine=4
00BF   2???           00617         Goto MoveRight   ;State Machine=5
                      00618 
                      00619 ; ------------------------------------ 
                      00620 ; Key Enter
                      00621 ; Choose routine to execute based on StateMachine
                      00622 ; ------------------------------------ 
00C0                  00623 KeyEnter
00C0   ???? ????      00624         PageselW KeyEnterRoutineTable
00C2   30??           00625         movlw Low KeyEnterRoutineTable
00C3   07??           00626         Addwf StateMachine,W
00C4   1803           00627         Btfsc STATUS,C
00C5   0A8A           00628         incf PCLATH
00C6   0082           00629         movwf PCL
00C7                  00630 KeyEnterRoutineTable
00C7   2???           00631         Goto EnterSub           ;State Machine=0
00C8   2???           00632         Goto EnterVariable  ;State Machine=1
00C9   2???           00633         Goto ExitVariable       ;State Machine=2
00CA   0008           00634         Return                          ;State Machine=3
00CB   2???           00635         Goto BacktoMenu         ;State Machine=4
00CC   2???           00636         Goto EnterVariable  ;State Machine=5
                      00637 
                      00638 ; ------------------------------------ 
                      00639 ; Key Esc
                      00640 ; Choose routine to execute based on StateMachine
                      00641 ; ------------------------------------ 
00CD                  00642 KeyExit
00CD   ???? ????      00643         Pageselw KeyExitRoutineTable
00CF   30??           00644         movlw Low KeyExitRoutineTable
00D0   07??           00645         Addwf StateMachine,W
00D1   1803           00646         Btfsc STATUS,C
00D2   0A8A           00647         incf PCLATH
00D3   0082           00648         movwf PCL
00D4                  00649 KeyExitRoutineTable
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 28


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00D4   2???           00650         Goto ExitSub            ;State Machine=0
00D5   2???           00651         Goto BacktoMenu         ;State Machine=1
00D6   2???           00652         Goto ExitVariable       ;State Machine=2
00D7   0008           00653         Return                          ;State Machine=3
00D8   2???           00654         Goto BacktoMenu         ;State Machine=4
00D9   2???           00655         Goto UpdateDS1307       ;State Machine=5
                      00656         
                      00657 
                      00658 ; ------------------------------------ 
                      00659 ; Routines Table
                      00660 ; W must hold the Routine's Number
                      00661 ; ------------------------------------ 
00DA                  00662 Routines
00DA   00??           00663         movwf tmp2
00DB   ???? ????      00664         Pageselw RoutinesTable
00DD   30??           00665         movlw Low RoutinesTable
00DE   07??           00666         Addwf tmp2,W
00DF   1803           00667         Btfsc STATUS,C
00E0   0A8A           00668         incf PCLATH
00E1   0082           00669         movwf PCL
00E2                  00670 RoutinesTable
00E2   0008           00671         Return                          ;0
00E3   0008           00672         Return                          ;1
00E4   0008           00673         Return                          ;2
00E5   2???           00674         Goto LoadTime           ;3
00E6   2???           00675         Goto SaveTime           ;4
00E7   2???           00676         Goto Exit2Main          ;5
00E8   2???           00677         Goto ManualFlood        ;6
00E9   2???           00678         Goto ManualDrain        ;7
00EA   2???           00679         Goto ManualIdle         ;8 
                      00680 
                      00681 
                      00682 ; ------------------------------------ 
                      00683 ; Up and Esc Key Strokes
                      00684 ; Enters to the Menu tree
                      00685 ; ------------------------------------ 
00EB                  00686 UpAndEsc
00EB   3003           00687         Movlw 0x03
00EC   06??           00688         xorwf StateMachine,W
00ED   1D03           00689         Btfss STATUS,Z
00EE   0008           00690         return
                      00691         
00EF   3001           00692         movlw 0x01
00F0   00??           00693         movwf Menu
00F1   00??           00694         movwf Line
00F2   00??           00695         movwf OldLine
00F3   00??           00696         movwf OldMenu
00F4   01??           00697         clrf StateMachine
00F5   01??           00698         clrf MenuDepth
00F6   2???           00699         Call ReadMenuTable
00F7   2???           00700         Call ScrollUp
00F8   0008           00701 return
                      00702 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 29


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00703 ;Info
                      00704 ;       clrf ESC_Hold
                      00705 ;KeyLoop:
                      00706 ;       BTFSC KeyPressed,RB5 ; Esc
                      00707 ;       goto ESC_Pressed
                      00708 ;       Return
                      00709 ;ESC_Pressed:
                      00710 ;       BCF STATUS,C
                      00711 ;       movlw .80
                      00712 ;       subwf ESC_Hold,W
                      00713 ;       btfss STATUS,C
                      00714 ;       goto KeyLoop    
                      00715 ;       Call ManualIdle 
                      00716 ;return
                      00717 
                      00718 
00F9                  00719 IncContrast
00F9   3003           00720         Movlw 0x03
00FA   06??           00721         xorwf StateMachine,W
00FB   1D03           00722         Btfss STATUS,Z
00FC   0008           00723         return
                      00724 
00FD   0815           00725         movf CCPR1L,W
00FE   3AD2           00726         xorlw (15* 0x0A)
00FF   1903           00727         btfsc STATUS,Z
0100   0008           00728         Return
0101   3005           00729         movlw 0x05
0102   0795           00730         addwf CCPR1L
0103   0008           00731 return
                      00732 
0104                  00733 DecContrast
0104   3003           00734         Movlw 0x03
0105   06??           00735         xorwf StateMachine,W
0106   1D03           00736         Btfss STATUS,Z
0107   0008           00737         return
                      00738 
0108   0815           00739         movf CCPR1L,W
0109   1903           00740         btfsc STATUS,Z
010A   0008           00741         Return
010B   3005           00742         movlw 0x05
010C   0295           00743         subwf CCPR1L
010D   0008           00744 return
                      00745 
010E                  00746 InitialSCR
010E   2???           00747         Call ShowTimeAndStatus
010F   30C0           00748         movlw LCD_Line2
0110   2???           00749         call LCD_cmd
0111   305B           00750         movlw '['
0112   2???           00751         Call LCD_chr
                      00752         ;movlw 0x03
                      00753         ;Call LCD_chr
0113   30C2           00754         movlw LCD_Line2+.2
0114   2???           00755         call LCD_cmd
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 30


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0115   305D           00756         movlw ']'
0116   2???           00757         Call LCD_chr
0117   302D           00758         movlw '-'
0118   2???           00759         Call LCD_chr
0119   305B           00760         movlw '['
011A   2???           00761         Call LCD_chr
011B   30CF           00762         movlw LCD_Line2+.15
011C   2???           00763         call LCD_cmd
011D   305D           00764         movlw ']'
011E   2???           00765         Call LCD_chr
                      00766         
011F   2???           00767         Call ShowActiveAlarms
                      00768 
0120   0008           00769 return
                      00770 
                      00771 
                      00772 ; ------------------------------------ 
                      00773 ; Scroll Down LCD Menu
                      00774 ; on 2x16 LCD Display
                      00775 ; ------------------------------------ 
0121                  00776 ScrollDown
0121   08??           00777         Movf Line,W
0122   3A02           00778         xorlw 0x02 ; MaxLines in LCD
0123   1D03           00779         Btfss STATUS,Z
0124   0A??           00780         incf Line
                      00781 
                      00782 
0125   08??           00783         movf Menu_POS,W
0126   3E01           00784         addlw 0x01 ; if Menu_POS=FF (UI - Lower Item) then FF+1=0
0127   1903           00785         btfsc STATUS,Z
0128   03??           00786         decf Menu
                      00787 
0129   08??           00788         movf Menu,W
012A   2???           00789         Call ReadMenuTable
012B   3080           00790         movlw LCD_Line1
012C   2???           00791         call LCD_cmd
012D   2???           00792         call LCD_MenuMsg
                      00793 
                      00794 
012E   0A??           00795         incf Menu
012F   08??           00796         movf Menu,W
0130   2???           00797         call ReadMenuTable
0131   30C0           00798         movlw LCD_Line2
0132   2???           00799         call LCD_cmd
0133   2???           00800         call LCD_MenuMsg        
                      00801         
                      00802         
0134   2???           00803         call PrintArrowLine2
0135   0008           00804 return
                      00805 
                      00806 ; ------------------------------------ 
                      00807 ; Scroll UP LCD Menu
                      00808 ; on 2x16 LCD Display
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 31


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00809 ; ------------------------------------ 
0136                  00810 ScrollUp
0136   08??           00811         Movf Line,W
0137   3A01           00812         xorlw 0x01 ; Is it the first Line in LCD
0138   1D03           00813         Btfss STATUS,Z
0139   03??           00814         decf Line ;if not, then dec Line
                      00815 
013A   08??           00816         movf Menu_POS,W
013B   1903           00817         btfsc STATUS,Z
013C   0A??           00818         incf Menu
                      00819 
                      00820 
013D   08??           00821         movf Menu,W     
013E   2???           00822         Call ReadMenuTable
013F   30C0           00823         movlw LCD_Line2
0140   2???           00824         call LCD_cmd
0141   2???           00825         call LCD_MenuMsg        
                      00826         
0142   3080           00827         movlw LCD_Line1
0143   2???           00828         call LCD_cmd
0144   03??           00829         decf Menu
0145   08??           00830         movf Menu,W
0146   2???           00831         call ReadMenuTable
0147   2???           00832         call LCD_MenuMsg
                      00833 
0148   2???           00834         call PrintArrowLine1
0149   0008           00835 return
                      00836 
                      00837 
                      00838 ; ------------------------------------ 
                      00839 ; Enter LCD submenu
                      00840 ; 
                      00841 ; ------------------------------------ 
014A                  00842 EnterSub
                      00843 
                      00844         ;check if there is a routine to call
014A   08??           00845         movf Menu_RoutineOnEnter,W
014B   2???           00846         Call Routines
                      00847 
014C   0A??           00848         Incf Menu_ExtMenuSegment,W
014D   1D03           00849         btfss STATUS,Z
014E   2???           00850         call PopulateExtendedMenu
                      00851 
014F   0A??           00852         Incf Menu_MenuOnEnter,W ; if ND= 0xFF then FF+1=0, so returns
0150   1903           00853         btfsc STATUS,Z
0151   0008           00854         Return
                      00855         
                      00856         
0152   ????           00857         BankiSel OldLine
0153   30??           00858         movlw OldLine
0154   07??           00859         addwf MenuDepth,W
0155   0084           00860         movwf FSR
0156   08??           00861         movf Line,W 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 32


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0157   0080           00862         movwf INDF      ;Save Old Line
                      00863         
0158   30??           00864         movlw OldMenu
0159   07??           00865         addwf MenuDepth,W
015A   0084           00866         movwf FSR
015B   08??           00867         movf Menu,W 
015C   0080           00868         movwf INDF      ;Save Old Menu
015D   0A??           00869         incf MenuDepth 
                      00870 
                      00871 
015E   3001           00872         movlw 0x01
015F   00??           00873         movwf Line
0160   08??           00874         movf Menu_MenuOnEnter,W
0161   00??           00875         movwf Menu
                      00876 
0162   30C0           00877         movlw LCD_Line2
0163   2???           00878         call LCD_cmd
                      00879         
0164   0A??           00880         incf Menu,W
0165   2???           00881         call ReadMenuTable
0166   2???           00882         call LCD_MenuMsg
                      00883 
0167   3080           00884         movlw LCD_Line1
0168   2???           00885         call LCD_cmd
0169   08??           00886         movf Menu,W
016A   2???           00887         call ReadMenuTable
016B   2???           00888         call LCD_MenuMsg
                      00889 
016C   2???           00890         call PrintArrowLine1
                      00891 
016D   0008           00892 return
                      00893 
                      00894 
                      00895 ; ------------------------------------ 
                      00896 ; Exit LCD SubMenu
                      00897 ; 
                      00898 ; ------------------------------------ 
016E                  00899 ExitSub
016E   08??           00900         movf MenuDepth,W
016F   1903           00901         BTFSC STATUS,Z
0170   0008           00902         return
0171   03??           00903         decf MenuDepth 
                      00904         
0172   ????           00905         bankisel OldLine
0173   30??           00906         movlw OldLine
0174   07??           00907         addwf MenuDepth,W
0175   0084           00908         movwf FSR
0176   0800           00909         movf INDF,W
0177   00??           00910         movwf Line ;Restore Old Line
                      00911 
0178   30??           00912         movlw OldMenu
0179   07??           00913         addwf MenuDepth,W
017A   0084           00914         movwf FSR
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 33


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

017B   0800           00915         movf INDF,W
017C   00??           00916         movwf Menu ;Restore Old Menu
017D   2???           00917         call ReadMenuTable
017E   2???           00918         Goto RefreshScreen
017F   0008           00919 return
                      00920 
0180                  00921 RefreshScreen
0180   3001           00922         movlw 0x01
0181   06??           00923         xorwf Line,W
0182   1903           00924         btfsc STATUS,Z
0183   2???           00925         goto LastLine1
0184   2???           00926         goto LastLine2
                      00927 
0185                  00928 LastLine1
0185   30C0           00929         movlw LCD_Line2
0186   2???           00930         call LCD_cmd
0187   0A??           00931         incf Menu,W
0188   2???           00932         call ReadMenuTable
0189   2???           00933         call LCD_MenuMsg
                      00934 
018A   3080           00935         movlw LCD_Line1
018B   2???           00936         call LCD_cmd
018C   08??           00937         movf Menu,W
018D   2???           00938         call ReadMenuTable
018E   2???           00939         call LCD_MenuMsg
018F   2???           00940         call PrintArrowLine1
0190   0008           00941         return
                      00942 
0191                  00943 LastLine2
0191   3080           00944         movlw LCD_Line1
0192   2???           00945         call LCD_cmd
0193   03??           00946         decf Menu,W
0194   2???           00947         call ReadMenuTable
0195   2???           00948         call LCD_MenuMsg
                      00949 
0196   30C0           00950         movlw LCD_Line2
0197   2???           00951         call LCD_cmd
0198   08??           00952         movf Menu,W
0199   2???           00953         call ReadMenuTable
019A   2???           00954         call LCD_MenuMsg
019B   2???           00955         call PrintArrowLine2
019C   0008           00956 return
                      00957 
019D                  00958 PrintArrowLine1
019D   308F           00959         movlw LCD_Line1 + 0x0f
019E   2???           00960         call LCD_cmd
019F   307F           00961         movlw b'01111111'
01A0   2???           00962         call LCD_chr
01A1   0008           00963 return
                      00964 
01A2                  00965 PrintArrowLine2
01A2   30CF           00966         movlw LCD_Line2 + 0x0f
01A3   2???           00967         call LCD_cmd
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 34


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01A4   307F           00968         movlw b'01111111'
01A5   2???           00969         call LCD_chr
01A6   0008           00970 return
                      00971 
                      00972 
                      00973 ; ------------------------------------ 
                      00974 ; Enter Variable
                      00975 ; Changes Cursor to Blinking and allows user
                      00976 ; to change variables values
                      00977 ; Changes State Machine to 2
                      00978 ; ------------------------------------ 
01A7                  00979 EnterVariable
01A7   08??           00980         movf StateMachine,W
01A8   00??           00981         movwf OldStateMachine
01A9   3002           00982         movlw 0x02
01AA   00??           00983         movwf StateMachine
01AB   300D           00984         movlw LCD_Blinc 
01AC   2???           00985         call LCD_cmd
01AD   0008           00986 return
                      00987 
                      00988 ; ------------------------------------ 
                      00989 ; Exit Variable
                      00990 ; Changes Cursor to Underlined and allows user
                      00991 ; to move accross variables
                      00992 ; Changes State Machine to 1
                      00993 ; ------------------------------------ 
01AE                  00994 ExitVariable
01AE   08??           00995         movf OldStateMachine,W
01AF   00??           00996         movwf StateMachine
01B0   300E           00997         movlw LCD_Underline
01B1   2???           00998         call LCD_cmd
01B2   0008           00999 return
                      01000 
                      01001 ; ------------------------------------ 
                      01002 ; Back to Menu tree
                      01003 ; If data are changed then save Data to EEPROM
                      01004 ; and return to menu tree
                      01005 ; changes StateMachine to 0
                      01006 ; ------------------------------------ 
01B3                  01007 BacktoMenu
01B3   08??           01008         movf ChangeFlag,F
01B4   1D03           01009         btfss STATUS,Z  
01B5   2???           01010         call WriteDatatoEEPROM
                      01011 
                      01012         
01B6   300C           01013         movlw b'00001100'
01B7   2???           01014         call LCD_cmd
                      01015 
01B8   3002           01016         movlw LCD_CursorHome
01B9   2???           01017         call LCD_cmd
                      01018 
01BA   300C           01019         movlw LCD_DisOn
01BB   2???           01020         call LCD_cmd
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 35


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01021 
01BC   01??           01022         clrf StateMachine
01BD   2???           01023         Call ExitSub
01BE   01??           01024         clrf ChangeFlag
01BF   0008           01025 return
                      01026         
01C0                  01027 UpdateDS1307
01C0   300C           01028         movlw LCD_DisOn
01C1   2???           01029         call LCD_cmd
                      01030 
01C2   2???           01031         Call SaveTime
01C3   01??           01032         clrf StateMachine
01C4   2???           01033         Call ExitSub
01C5   01??           01034         clrf ChangeFlag
                      01035         
01C6   0008           01036 return
                      01037 
                      01038 
                      01039 
                      01040 ; ------------------------------------ 
                      01041 ; Increase Variables
                      01042 ; Works when StateMachine=1
                      01043 ; ------------------------------------ 
01C7                  01044 IncVariable
01C7   3001           01045         movlw 0x01
01C8   00??           01046         movwf ChangeFlag
                      01047 
01C9   30??           01048         movlw EEPROM_Data
01CA   07??           01049         addwf RelativeColumn,W
01CB   0084           01050         movwf FSR
01CC   0800           01051         movf INDF,W
01CD   00??           01052         movwf i; holds the last value
                      01053 
01CE   30??           01054         movlw EEPROM_Max
01CF   07??           01055         addwf RelativeColumn,W
01D0   0084           01056         movwf FSR
01D1   0800           01057         movf INDF,W
01D2   06??           01058         xorwf i,W
01D3   1D03           01059         btfss STATUS,Z ;check if i=Max
01D4   2???           01060         Goto IncVar 
                      01061         
01D5   30??           01062         movlw EEPROM_Min
01D6   07??           01063         addwf RelativeColumn,W
01D7   0084           01064         movwf FSR
01D8   0800           01065         movf INDF,W
01D9   00??           01066         movwf i ; i holds the min value
01DA   2???           01067         goto $+2
01DB                  01068 IncVar
01DB   0A??           01069         incf i
01DC   30??           01070         movlw EEPROM_Data
01DD   07??           01071         addwf RelativeColumn,W
01DE   0084           01072         movwf FSR
01DF   08??           01073         movf i,W
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 36


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01E0   0080           01074         movwf INDF
01E1   2???           01075         Call PrintLCDVariable ; w holds the value to be displayed
01E2   0008           01076 return
                      01077 
                      01078 ; ------------------------------------ 
                      01079 ; Decrease Variables
                      01080 ; Works when StateMachine=1
                      01081 ; ------------------------------------ 
01E3                  01082 DecVariable
01E3   3001           01083         movlw 0x01
01E4   00??           01084         movwf ChangeFlag
                      01085 
01E5   30??           01086         movlw EEPROM_Data
01E6   07??           01087         addwf RelativeColumn,W
01E7   0084           01088         movwf FSR
01E8   0800           01089         movf INDF,W
01E9   00??           01090         movwf i; holds the last value
                      01091 
01EA   30??           01092         movlw EEPROM_Min
01EB   07??           01093         addwf RelativeColumn,W
01EC   0084           01094         movwf FSR
01ED   0800           01095         movf INDF,W
01EE   06??           01096         xorwf i,W
01EF   1D03           01097         btfss STATUS,Z ;check if i=Max
01F0   2???           01098         Goto DecVar ;
                      01099 
01F1   30??           01100         movlw EEPROM_Max
01F2   07??           01101         addwf RelativeColumn,W
01F3   0084           01102         movwf FSR
01F4   0800           01103         movf INDF,W
01F5   00??           01104         movwf i ; i holds the maxn value
01F6   2???           01105         goto $+2
01F7                  01106 DecVar
01F7   03??           01107         decf i
01F8   30??           01108         movlw EEPROM_Data
01F9   07??           01109         addwf RelativeColumn,W
01FA   0084           01110         movwf FSR
01FB   08??           01111         movf i,W
01FC   0080           01112         movwf INDF
                      01113         
01FD   2???           01114         Call PrintLCDVariable
01FE   0008           01115 return
                      01116 
                      01117 ; ------------------------------------ 
                      01118 ; Move cursor right
                      01119 ; RelativeColumn should hold the proper value
                      01120 ; CursorPos should hold the cursor places on line 1 eg. {1,3,6)
                      01121 ; RelativeColumn is used like an index for the CursorPos
                      01122 ; ------------------------------------ 
01FF                  01123 MoveRight
01FF   0A??           01124         incf RelativeColumn
0200   08??           01125         movf ExtMenu_VarNum,W
0201   0183           01126         clrf STATUS
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 37


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0202   06??           01127         xorwf RelativeColumn,W
0203   1903           01128         btfsc STATUS,Z 
0204   01??           01129         clrf RelativeColumn
                      01130 
0205   ???? ????      01131         banksel CursorPos
0207   30??           01132         movlw CursorPos; W holds the address of CursorPos
0208   ???? ????      01133         Banksel RelativeColumn
020A   07??           01134         addwf RelativeColumn,W ; CursorPos=+RelativeColumn
020B   0084           01135         movwf FSR
020C   0800           01136         movf INDF,W
020D   00??           01137         movwf Column
020E   2???           01138         call LCD_cmd
020F   300E           01139         movlw LCD_Underline
0210   2???           01140         call LCD_cmd
0211   0008           01141 return
                      01142 
                      01143 ; ------------------------------------ 
                      01144 ; Move cursor Left
                      01145 ; RelativeColumn should hold the proper value
                      01146 ; CursorPos should hold the cursor places on line 1 eg. {1,3,6)
                      01147 ; RelativeColumn is used like an index for the CursorPos
                      01148 ; ------------------------------------ 
0212                  01149 MoveLeft
0212   08??           01150         movf RelativeColumn,W
0213   1D03           01151         btfss STATUS,Z ; check if=0
0214   2???           01152         Goto MoveBack
0215   03??           01153         decf ExtMenu_VarNum,W
0216   00??           01154         movwf RelativeColumn
0217   2???           01155         goto $+2
0218                  01156 MoveBack
0218   03??           01157         decf RelativeColumn
                      01158 
0219   ???? ????      01159         banksel CursorPos
021B   30??           01160         movlw CursorPos; W holds the address of CursorPos
021C   ???? ????      01161         Banksel RelativeColumn
021E   07??           01162         addwf RelativeColumn,W ; CursorPos=+RelativeColumn
021F   0084           01163         movwf FSR
0220   0800           01164         movf INDF,W
0221   00??           01165         movwf Column
0222   2???           01166         call LCD_cmd
0223   300E           01167         movlw LCD_Underline
0224   2???           01168         call LCD_cmd
0225   0008           01169 return
                      01170 
                      01171 
                      01172 ; ------------------------------------ 
                      01173 ; Exit to Main Screen
                      01174 ; ------------------------------------ 
0226                  01175 Exit2Main
0226   01??           01176         clrf KeyPressed
0227   3003           01177         movlw 0x03
0228   00??           01178         movwf StateMachine
                      01179         ;clrf WaterStatus
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 38


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0229   3001           01180         movlw LCD_Clear
022A   2???           01181         call LCD_cmd
022B   0008           01182 return
                      01183 
                      01184 
                      01185 
022C                  01186 LoadTime
                      01187         ;Read Current Time
022C   2???           01188         Call Read_DS1307
                      01189 
                      01190         ;Store Current Hour in EEPROM
022D   08??           01191         movf HOUR,W
022E   2???           01192         Call Bcd2Hex
022F   1683 1303      01193         Banksel EEDATA
0231   009A           01194         movwf EEDATA
0232   3032           01195         movlw .50
0233   009B           01196         movwf EEADR
0234   1283 1303      01197         Banksel 0
0236   2???           01198         Call EEPROM_Write
                      01199 
                      01200         ;Store Current Min in EEPROM
0237   08??           01201         movf MIN,W
0238   2???           01202         Call Bcd2Hex
0239   1683 1303      01203         Banksel EEDATA
023B   009A           01204         movwf EEDATA
023C   3033           01205         movlw .51
023D   009B           01206         movwf EEADR
023E   1283 1303      01207         Banksel 0
0240   2???           01208         Call EEPROM_Write
                      01209 
                      01210         ;Store Current SEC in EEPROM
0241   08??           01211         movf SEC,W
0242   2???           01212         Call Bcd2Hex
0243   1683 1303      01213         Banksel EEDATA
0245   009A           01214         movwf EEDATA
0246   3034           01215         movlw .52
0247   009B           01216         movwf EEADR
0248   1283 1303      01217         Banksel 0
024A   2???           01218         Call EEPROM_Write
024B   0008           01219 return
                      01220 
024C                  01221 SaveTime
024C   08??           01222         movf ChangeFlag,f
024D   1D03           01223         btfss STATUS,Z  
024E   2???           01224         goto $+2
024F   0008           01225         return
                      01226 
0250   ????           01227         bankisel EEPROM_Data
0251   30??           01228         movlw EEPROM_Data; Set FSR to point 
0252   0084           01229         movwf FSR                ;
0253   0800           01230         movf INDF,W
0254   2???           01231         Call Hex2Dec
0255   08??           01232         movf BCD,W
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 39


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0256   00??           01233         movwf HOUR
                      01234 
0257   0A84           01235         incf FSR
0258   0800           01236         movf INDF,W             
0259   2???           01237         Call Hex2Dec
025A   08??           01238         movf BCD,W
025B   00??           01239         movwf MIN
                      01240 
025C   0A84           01241         incf FSR
025D   0800           01242         movf INDF,W
025E   2???           01243         Call Hex2Dec
025F   08??           01244         movf BCD,W
0260   00??           01245         movwf SEC
0261   2???           01246         Call Write_DS1307
0262   0008           01247 return
                      01248 
                      01249 
                      01250 
                      01251 ; ------------------------------------ 
                      01252 ; Manual Flood
                      01253 ; Sets Flood Pump On
                      01254 ; and stays in loop until keypressed
                      01255 ; ------------------------------------ 
0263                  01256 ManualFlood
                      01257         ;clear LCD
0263   3001           01258         movlw LCD_Clear
0264   2???           01259         call LCD_cmd
0265   30??           01260         movlw Low FloodingText
0266   00??           01261         movwf TextOffset
0267   30??           01262         movlw High FloodingText
0268   00??           01263         movwf TextSegment
0269   2???           01264         call LCD_msg
026A                  01265 FloodLoop
026A   1305           01266         bcf DrainPump
026B   0000           01267         nop
026C   0000           01268         nop
026D   0000           01269         nop
026E   0000           01270         nop
026F   1785           01271         bsf FloodPump
0270                  01272 FloodLoop2:
                      01273 ;       movf KeyPressed,W
0270   1E80           01274 BTFSs KeyPressed,RB5
                      01275         ;btfSC STATUS,Z
0271   2???           01276         goto FloodLoop2
0272   3010           01277         movlw 0x10 
0273   2???           01278         call Delay ;
                      01279 
0274   3001           01280         movlw LCD_Clear
0275   2???           01281         call LCD_cmd
0276   2???           01282         Call ClearPumps
0277   01??           01283         clrf KeyPressed
0278   2???           01284         goto RefreshScreen
                      01285 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 40


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01286 ; ------------------------------------ 
                      01287 ; Manual Drain
                      01288 ; Sets Drain Pump On
                      01289 ; and stays in loop until keypressed
                      01290 ; ------------------------------------ 
0279                  01291 ManualDrain
                      01292         ;clear LCD
0279   3001           01293         movlw LCD_Clear
027A   2???           01294         call LCD_cmd
027B   30??           01295         movlw Low DrainingText
027C   00??           01296         movwf TextOffset
027D   30??           01297         movlw High DrainingText
027E   00??           01298         movwf TextSegment
027F   2???           01299         call LCD_msg
0280   01??           01300         clrf KeyPressed
0281                  01301 DrainLoop
0281   1385           01302         bcf FloodPump
0282   0000           01303         nop
0283   0000           01304         nop
0284   0000           01305         nop
0285   0000           01306         nop
0286   1705           01307         bsf DrainPump
0287                  01308 DrainLoop2:
                      01309 ;       movf KeyPressed,W
0287   1E80           01310 BTFSs KeyPressed,RB5
                      01311         ;btfSC STATUS,Z
0288   2???           01312         goto DrainLoop2
                      01313 
0289   3010           01314         movlw 0x10 
028A   2???           01315         call Delay ;
                      01316 
028B   3001           01317         movlw LCD_Clear
028C   2???           01318         call LCD_cmd
028D   2???           01319         Call ClearPumps
028E   01??           01320         clrf KeyPressed
028F   2???           01321         goto RefreshScreen
                      01322 
                      01323 
                      01324 ; ------------------------------------ 
                      01325 ; Manual Idle
                      01326 ; Sets Drain Pump On
                      01327 ; and stays in loop until keypressed
                      01328 ; ------------------------------------ 
0290                  01329 ManualIdle
                      01330         ;clear LCD
0290   3001           01331         movlw LCD_Clear
0291   2???           01332         call LCD_cmd
0292   30??           01333         movlw Low IdlingText
0293   00??           01334         movwf TextOffset
0294   30??           01335         movlw High IdlingText
0295   00??           01336         movwf TextSegment
0296   2???           01337         call LCD_msg
0297   01??           01338         clrf KeyPressed
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 41


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01339 
0298   1385           01340         bcf FloodPump
0299   2???           01341         Goto $+1
029A   2???           01342         Goto $+1
029B   1305           01343         bcf DrainPump
029C                  01344 IdleLoop:
                      01345 ;       movf KeyPressed,W
029C   1E80           01346 BTFSs KeyPressed,RB5
                      01347         ;btfSC STATUS,Z
029D   2???           01348         goto IdleLoop
                      01349 
029E   3010           01350         movlw 0x10 
029F   2???           01351         call Delay ;
                      01352 
02A0   3001           01353         movlw LCD_Clear
02A1   2???           01354         call LCD_cmd
02A2   2???           01355         Call ClearPumps
02A3   01??           01356         clrf KeyPressed
02A4   2???           01357         goto RefreshScreen
                      01358 
                      01359 
                      01360 
                      01361 ; ------------------------------------ 
                      01362 ; Clear Pumps
                      01363 ; Sets Flood Pump Off
                      01364 ; Sets Drain Pump Off
                      01365 ; it is called only from Manual Drain & Flood
                      01366 ; ------------------------------------ 
02A5                  01367 ClearPumps
02A5   08??           01368         movf WaterStatus,W
02A6   1D03           01369         btfss STATUS,Z ;0=Drain 1=Flood
02A7   2???           01370         Goto $+3
02A8   1385           01371         bcf FloodPump
02A9   0008           01372         return
02AA   1305           01373         bcf DrainPump   
02AB   0008           01374 return
                      01375 
                      01376 ; ------------------------------------ 
                      01377 ; Populate Extended Menu
                      01378 ;
                      01379 ; ------------------------------------ 
02AC                  01380 PopulateExtendedMenu
                      01381         ;Load Extended Menu Table in ExtMenuItem Variable
02AC   08??           01382         movf Menu_ExtMenuOffset,W
02AD   00??           01383         movwf ExtMenuItem_Offset
02AE   08??           01384         movf Menu_ExtMenuSegment,W
02AF   00??           01385         movwf ExtMenuItem_Segment
02B0   2???           01386         Call ReadExtMenuItem
                      01387 
                      01388         ;Set StateMachine
02B1   08??           01389         movf ExtMenu_StateMachine,W
02B2   00??           01390         movwf StateMachine
                      01391 
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 42


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01392         ;Fix the restore point for when ESC is pressed. Same a in EnterSub
02B3   ????           01393         BankiSel OldLine
02B4   30??           01394         movlw OldLine
02B5   07??           01395         addwf MenuDepth,W
02B6   0084           01396         movwf FSR
02B7   08??           01397         movf Line,W 
02B8   0080           01398         movwf INDF      ;Save Old Line
02B9   30??           01399         movlw OldMenu
02BA   07??           01400         addwf MenuDepth,W
02BB   0084           01401         movwf FSR
02BC   08??           01402         movf Menu,W 
02BD   0080           01403         movwf INDF      ;Save Old Menu
02BE   0A??           01404         incf MenuDepth 
02BF   1283 1303      01405         Banksel 0
                      01406 
                      01407         ;Read Variables Table
02C1   08??           01408         movf ExtMenu_VarSegment,W
02C2   00??           01409         movwf VarTbl_PCLATH
02C3   08??           01410         movf ExtMenu_VarOffset,W
02C4   00??           01411         movwf VarTbl_PCL
02C5   08??           01412         movf ExtMenu_VarNum,W
02C6   2???           01413         Call ReadVarTable
                      01414 
                      01415         ;Read Cursor Position Table
02C7   2???           01416         Call ReadCursorTbl
                      01417 
                      01418         ;clear LCD
02C8   3001           01419         movlw LCD_Clear
02C9   2???           01420         call LCD_cmd
                      01421         ;Print Again Menu Line
02CA   3080           01422         movlw LCD_Line1
02CB   2???           01423         call LCD_cmd
02CC   08??           01424         movf Menu,W
02CD   2???           01425         call LCD_MenuMsg
                      01426 
                      01427         ;Print Extended Menus Text
02CE   08??           01428         movf ExtMenu_TextOffset,W
02CF   00??           01429         movwf TextOffset
02D0   08??           01430         movf ExtMenu_TextSegment,W
02D1   00??           01431         movwf TextSegment
02D2   2???           01432         call LCD_msg
                      01433         
                      01434 
02D3   01??           01435         clrf RelativeColumn
02D4   2???           01436         Call RefreshLCD
                      01437 
02D5   30FF           01438         movlw 0xFF
02D6   00??           01439         movwf RelativeColumn
02D7   2???           01440         call MoveRight
02D8   0008           01441 return
                      01442 
                      01443 
                      01444 ;SetUFSwDelay
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 43


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      01445 ;       bankisel EEPROM_Data
                      01446 ;       movlw EEPROM_Data; Set FSR to point 
                      01447 ;       movwf FSR
                      01448 ;       movf INDF,W
                      01449 ;       movwf UFSwDelay
                      01450 ;return
                      01451 
                      01452 ;SetLFSwDelay
                      01453 ;       bankisel EEPROM_Data
                      01454 ;       movlw EEPROM_Data; Set FSR to point 
                      01455 ;       movwf FSR
                      01456 ;       movf INDF,W
                      01457 ;       movwf LFSwDelay
                      01458 ;return
                      01459 
                      01460 ; ------------------------------------ 
                      01461 ; LCD Menu Message / Lcd Message
                      01462 ; Before been called, MenuItem should be adjusted
                      01463 ; ------------------------------------ 
02D9                  01464 LCD_MenuMsg
02D9   08??           01465         Movf Menu_TextOffset,W
02DA   00??           01466         movwf TextOffset        
02DB   08??           01467         Movf Menu_TextSegment,W
02DC   00??           01468         movwf TextSegment       
02DD                  01469 LCD_msg
02DD   08??           01470         Movf TextOffset,W
02DE   00??           01471         Movwf LCD_tmp  ;hold the offset of the text label in Lcd_tmp
02DF   30??           01472         movlw High LCD_MenuMsg_Loop
02E0   3000           01473         movlw 0x0
02E1   00??           01474         movwf Counter
02E2   01??           01475         clrf Flag
02E3                  01476 LCD_MenuMsg_Loop        
02E3   2???           01477         Call LCD_Text
02E4   ????           01478         pagesel $
02E5   00??           01479         movwf W_Old
                      01480 
02E6   08??           01481         movf Flag,F
02E7   1D03           01482         btfss STATUS,Z
02E8   2???           01483         Goto SetCursor  
                      01484 
02E9   08??           01485         movf W_Old,W
02EA   3A25           01486         xorlw '%';is it a zero?
02EB   1D03           01487         btfss STATUS, Z
02EC   2???           01488         Goto PrintCHR
02ED   2???           01489         Goto FlagOn
                      01490 
02EE                  01491 SetCursor
02EE   08??           01492         movf W_Old,W
02EF   2???           01493         call LCD_cmd
02F0   01??           01494         clrf Flag
02F1   2???           01495         goto NextCHR
                      01496 
02F2                  01497 FlagOn
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 44


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02F2   3001           01498         movlw 1
02F3   00??           01499         movwf Flag
02F4   2???           01500         goto NextCHR
                      01501 
02F5                  01502 PrintCHR
02F5   08??           01503         movf W_Old,W
02F6   1903           01504         btfsc STATUS, Z
02F7   2???           01505         goto $+7
02F8   2???           01506         call LCD_chr
                      01507 
02F9                  01508 NextCHR
02F9   0A??           01509         incf Counter
02FA   0A??           01510         incf LCD_tmp, F ; check if LCD_tmp exceed the page limit
02FB   1903           01511         btfsc STATUS,Z  ; if so then increase TextSegment by 
02FC   0A??           01512         incf TextSegment
                      01513         
02FD   2???           01514         goto LCD_MenuMsg_Loop   
                      01515 ;Send blanc chars to fill screen, in case message < 16 characters
02FE   0183           01516         clrf STATUS
02FF   3010           01517         movlw 0x10
0300   02??           01518         subwf Counter,W
0301   1C03           01519     btfss STATUS, C
0302   2???           01520         goto $+2
0303   0008           01521         Return
0304   0A??           01522         incf Counter    
0305   3020           01523         movlw 0x20
0306   2???           01524         call LCD_chr
0307   2???           01525         goto $-8
0308                  01526 LCD_Text
0308   08??           01527         movf TextSegment,W  ; get the segment of the Text block (address H700:Hxxxx)
0309   008A           01528         movwf PCLATH ;set the segment
030A   08??           01529         movf LCD_tmp,W
030B   0082           01530         movwf PCL
030C   0008           01531 return
                      01532 
                      01533 
                      01534 
                      01535 
1E10                  01536 end
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 45


SYMBOL TABLE
  LABEL                             VALUE 

ABSNotIDLE                        0000004F
ABS_Idle                          00000058
ADDEN                             00000003
ADEN                              00000003
ActiveTimer                       00000000
AlarmCHK                          00000000
BCD                               00000000
BRGH                              00000002
BacktoMenu                        000001B3
Bank0                             00000000
Bcd2Hex                           00000000
BlancLine                         000005E0
Blink                             00000035
BlinkCnt                          00000036
BuildCustomChars                  00000000
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CIS                               00000003
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000001F
CMIE                              00000006
CMIF                              00000006
CREN                              00000004
CSRC                              00000007
ChangeFlag                        0000002A
CheckTMR0                         00000022
CheckTMR1                         00000032
CheckWaterStatus                  00000000
Check_RTC                         00000000
ClearPumps                        000002A5
ClockText                         000005A3
Column                            00000015
Counter                           00000023
CursorCycle                       000003F9
CursorFSw                         000003F9
CursorFullTime                    000003F6
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 46


SYMBOL TABLE
  LABEL                             VALUE 

CursorOnOff                       000003F9
CursorPos                         00000028
CursorTable                       000003F4
CursorTime                        000003F4
CycleTmrVarD                      000003EC
CycleTmrVarF                      000003E8
CycleTmrVarS                      000003D4
CycleTmrVarSP                     000003E0
CycleTmrVarSR                     000003D8
Cycle_Idle                        0000005D
Cycle_Tmr_Drain                   000001E8
Cycle_Tmr_Flood                   000001E0
Cycle_Tmr_Start                   000001D0
Cycle_Tmr_Status                  000001C8
Cycle_Tmr_Stop                    000001D8
DATA_CP_OFF                       00003FFF
DATA_CP_ON                        00003EFF
DC                                00000001
DecContrast                       00000104
DecText                           0000058B
DecVar                            000001F7
DecVariable                       000001E3
Decimal                           00000001
Delay                             00000000
DelayLoop                         0000000F
DownEnter                         00000050
Drain                             00000000
DrainLoop                         00000281
DrainLoop2                        00000287
DrainPump                         PORTA,6
DrainTxt                          00000572
DrainingText                      000005C6
EEADR                             0000009B
EECON1                            0000009C
EECON2                            0000009D
EEDATA                            0000009A
EEIE                              00000007
EEIF                              00000007
EEPROM_Address                    00000000
EEPROM_Data                       00000008
EEPROM_DataType                   00000010
EEPROM_Max                        00000020
EEPROM_Min                        00000018
EEPROM_Read                       00000000
EEPROM_Write                      00000000
ESC_Hold                          00000038
EnterSub                          0000014A
EnterVariable                     000001A7
Exit2Main                         00000226
ExitInt                           0000003C
ExitSub                           0000016E
ExitTmr0                          00000030
ExitVariable                      000001AE
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 47


SYMBOL TABLE
  LABEL                             VALUE 

ExitWaterStatusFlowChart          0000005F
ExtMI_Tmr10_Drain                 000002D8
ExtMI_Tmr10_Flood                 000002D0
ExtMI_Tmr10_Status                000002C8
ExtMI_Tmr1_Drain                  00000200
ExtMI_Tmr1_Flood                  000001F8
ExtMI_Tmr1_Status                 000001F0
ExtMI_Tmr2_Drain                  00000218
ExtMI_Tmr2_Flood                  00000210
ExtMI_Tmr2_Status                 00000208
ExtMI_Tmr3_Drain                  00000230
ExtMI_Tmr3_Flood                  00000228
ExtMI_Tmr3_Status                 00000220
ExtMI_Tmr4_Drain                  00000248
ExtMI_Tmr4_Flood                  00000240
ExtMI_Tmr4_Status                 00000238
ExtMI_Tmr5_Drain                  00000260
ExtMI_Tmr5_Flood                  00000258
ExtMI_Tmr5_Status                 00000250
ExtMI_Tmr6_Drain                  00000278
ExtMI_Tmr6_Flood                  00000270
ExtMI_Tmr6_Status                 00000268
ExtMI_Tmr7_Drain                  00000290
ExtMI_Tmr7_Flood                  00000288
ExtMI_Tmr7_Status                 00000280
ExtMI_Tmr8_Drain                  000002A8
ExtMI_Tmr8_Flood                  000002A0
ExtMI_Tmr8_Status                 00000298
ExtMI_Tmr9_Drain                  000002C0
ExtMI_Tmr9_Flood                  000002B8
ExtMI_Tmr9_Status                 000002B0
ExtMenuItem                       00000017
ExtMenuItem_Offset                00000005
ExtMenuItem_Segment               00000006
ExtMenu_CursorTblOffset           ExtMenuItem+5
ExtMenu_CursorTblSegment          ExtMenuItem+6
ExtMenu_StateMachine              ExtMenuItem+7
ExtMenu_TextOffset                ExtMenuItem+3
ExtMenu_TextSegment               ExtMenuItem+4
ExtMenu_VarNum                    ExtMenuItem+0
ExtMenu_VarOffset                 ExtMenuItem+1
ExtMenu_VarSegment                ExtMenuItem+2
F                                 00000001
FERR                              00000002
FSR                               00000004
Flag                              00000031
FlagOn                            000002F2
Flood                             00000001
FloodLoop                         0000026A
FloodLoop2                        00000270
FloodPump                         PORTA,7
FloodTxt                          00000563
FloodingText                      000005B8
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 48


SYMBOL TABLE
  LABEL                             VALUE 

GIE                               00000007
HOUR                              00000000
Hex2Dec                           00000000
I2C_Init                          00000000
I2C_Start                         00000000
I2C_Stop                          00000000
I2C_Write                         00000000
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
INTFlag                           0000002C
IRP                               00000007
Idle                              000000FF
IdleLoop                          0000029C
IdlingText                        000005D4
IncContrast                       000000F9
IncVar                            000001DB
IncVariable                       000001C7
InitialSCR                        0000010E
Initialize_RTC                    00000000
KeyDown                           000000A6
KeyDownRoutineTable               000000AD
KeyEnter                          000000C0
KeyEnterRoutineTable              000000C7
KeyExit                           000000CD
KeyExitRoutineTable               000000D4
KeyPressed                        00000024
KeyUp                             000000B3
KeyUpRoutineTable                 000000BA
LCD_2Lines                        0000002C
LCD_4bit                          00000020
LCD_Blinc                         0000000D
LCD_Clear                         00000001
LCD_CursorHome                    00000002
LCD_DisOff                        00000008
LCD_DisOn                         0000000C
LCD_Init                          00000000
LCD_Line1                         00000080
LCD_Line2                         000000C0
LCD_Lines                         00000002
LCD_MenuMsg                       000002D9
LCD_MenuMsg_Loop                  000002E3
LCD_Text                          00000308
LCD_Underline                     0000000E
LCD_chr                           00000000
LCD_cmd                           00000000
LCD_msg                           000002DD
LCD_tmp                           00000025
LFSwDelay                         00000034
LFSwVar                           000003D0
LI                                0x0ff
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 49


SYMBOL TABLE
  LABEL                             VALUE 

LastLine1                         00000185
LastLine2                         00000191
Line                              00000002
LoadTime                          0000022C
LoopCont                          00000061
M1                                000003FA
M10                               0000046B
M11                               0000047A
M12                               0000048A
M13                               0000049A
M14                               000004A6
M15                               000004B2
M16                               000004BE
M17                               000004CA
M18                               000004D6
M19                               000004E2
M2                                00000404
M20                               000004EE
M21                               000004FA
M22                               00000506
M3                                0000040F
M4                                0000041D
M5                                0000042C
M53                               00000513
M54                               00000522
M55                               00000531
M56                               00000540
M57                               0000054F
M6                                00000431
M7                                00000441
M8                                00000450
M9                                0000045B
MI                                0x01
MIN                               00000000
MNo                               000005E6
MOff                              000005EC
MOn                               000005E9
MYes                              000005E2
ManualDrain                       00000279
ManualFlood                       00000263
ManualIdle                        00000290
Menu                              0000000C
Menu1                             00000000
Menu10                            00000048
Menu11                            00000050
Menu12                            00000058
Menu13                            00000060
Menu14                            00000068
Menu15                            00000070
Menu16                            00000078
Menu17                            00000080
Menu18                            00000088
Menu19                            00000090
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 50


SYMBOL TABLE
  LABEL                             VALUE 

Menu2                             00000008
Menu20                            00000098
Menu21                            000000A0
Menu22                            000000A8
Menu23                            000000B0
Menu24                            000000B8
Menu25                            000000C0
Menu26                            000000C8
Menu27                            000000D0
Menu28                            000000D8
Menu29                            000000E0
Menu3                             00000010
Menu30                            000000E8
Menu31                            000000F0
Menu32                            000000F8
Menu33                            00000100
Menu34                            00000108
Menu35                            00000110
Menu36                            00000118
Menu37                            00000120
Menu38                            00000128
Menu39                            00000130
Menu4                             00000018
Menu40                            00000138
Menu41                            00000140
Menu42                            00000148
Menu43                            00000150
Menu44                            00000158
Menu45                            00000160
Menu46                            00000168
Menu47                            00000170
Menu48                            00000178
Menu49                            00000180
Menu5                             00000020
Menu50                            00000188
Menu51                            00000190
Menu52                            00000198
Menu53                            000001A0
Menu54                            000001A8
Menu55                            000001B0
Menu56                            000001B8
Menu57                            000001C0
Menu6                             00000028
Menu7                             00000030
Menu8                             00000038
Menu9                             00000040
MenuDepth                         00000016
MenuItem                          0000000D
MenuItemTbl                       00000000
MenuLoop                          00000044
Menu_ExtMenuOffset                MenuItem+5
Menu_ExtMenuSegment               MenuItem+6
Menu_MenuOnEnter                  MenuItem+1
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 51


SYMBOL TABLE
  LABEL                             VALUE 

Menu_POS                          MenuItem+0
Menu_Reserved                     MenuItem+7
Menu_RoutineOnEnter               MenuItem+2
Menu_TextOffset                   MenuItem+3
Menu_TextSegment                  MenuItem+4
MinText                           00000597
MoveBack                          00000218
MoveLeft                          00000212
MoveRight                         000001FF
ND                                0x0ff
NOT_BO                            00000000
NOT_BOD                           00000000
NOT_BOR                           00000000
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NextCHR                           000002F9
No                                00000000
OERR                              00000001
OPTION_REG                        00000081
ORThem                            00000055
OSCF                              00000003
OldLine                           00000003
OldMenu                           00000007
OldStateMachine                   0000000B
OldWaterStatus                    0000002E
OnOff                             00000003
Ones                              00000000
PCL                               00000002
PCLATH                            0000000A
PCLATH_OLD                        0000002B
PCON                              0000008E
PEIE                              00000006
PIE1                              0000008C
PIR1                              0000000C
PORTA                             00000005
PORTB                             00000006
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PopulateExtendedMenu              000002AC
PrintArrowLine1                   0000019D
PrintArrowLine2                   000001A2
PrintCHR                          000002F5
PrintLCDVariable                  00000000
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 52


SYMBOL TABLE
  LABEL                             VALUE 

RA4                               00000004
RA5                               00000005
RA6                               00000006
RA7                               00000007
RB0                               00000000
RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RP0                               00000005
RP1                               00000006
RX9                               00000006
RX9D                              00000000
ReadCursorTbl                     00000000
ReadExtMenuItem                   00000000
ReadMenuTable                     00000000
ReadVarTable                      00000000
Read_DS1307                       00000000
RefreshLCD                        00000000
RefreshScreen                     00000180
RelativeColumn                    00000021
Routines                          000000DA
RoutinesTable                     000000E2
SEC                               00000000
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
STATUS                            00000003
STATUS_TEMP                       00000001
SYNC                              00000004
SaveTime                          0000024C
ScrollDown                        00000121
ScrollUp                          00000136
SetCursor                         000002EE
Set_LFSw                          000002F0
Set_Time                          000002E0
Set_UFSw                          000002E8
ShowActiveAlarms                  00000000
ShowTimeAndStatus                 00000000
StateMachine                      00000022
StatusText                        000005B0
StatusTxt                         00000558
T0CS                              00000005
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 53


SYMBOL TABLE
  LABEL                             VALUE 

T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1OSCEN                           00000003
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1CS                            00000001
TMR1Delay                         00000032
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISA6                            00000006
TRISA7                            00000007
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRMT                              00000001
TX9                               00000006
TX9D                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 54


SYMBOL TABLE
  LABEL                             VALUE 

TXSTA                             00000098
Tens                              00000000
Text                              000003FA
TextOffset                        00000029
TextSegment                       00000028
TimeText                          00000581
TimeValue                         00000000
TimeVar                           000003C0
TmpVar                            00000004
Tmr0                              0
Tmr1                              1
UFSwDelay                         00000033
UFSwVar                           000003CC
UI                                0x00
UpAndEsc                          000000EB
UpEnter                           00000060
UpEsc                             000000A0
UpdateDS1307                      000001C0
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             0000009F
VREN                              00000007
VROE                              00000006
VRR                               00000005
VarTable                          000002F8
VarTbl_PCL                        00000027
VarTbl_PCLATH                     00000026
VarTbl_Tmr10D                     000003B4
VarTbl_Tmr10F                     000003AC
VarTbl_Tmr10S                     000003BC
VarTbl_Tmr1D                      00000300
VarTbl_Tmr1F                      000002F8
VarTbl_Tmr1S                      00000308
VarTbl_Tmr2D                      00000314
VarTbl_Tmr2F                      0000030C
VarTbl_Tmr2S                      0000031C
VarTbl_Tmr3D                      00000328
VarTbl_Tmr3F                      00000320
VarTbl_Tmr3S                      00000330
VarTbl_Tmr4D                      0000033C
VarTbl_Tmr4F                      00000334
VarTbl_Tmr4S                      00000344
VarTbl_Tmr5D                      00000350
VarTbl_Tmr5F                      00000348
VarTbl_Tmr5S                      00000358
VarTbl_Tmr6D                      00000364
VarTbl_Tmr6F                      0000035C
VarTbl_Tmr6S                      0000036C
VarTbl_Tmr7D                      00000378
VarTbl_Tmr7F                      00000370
VarTbl_Tmr7S                      00000380
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 55


SYMBOL TABLE
  LABEL                             VALUE 

VarTbl_Tmr8D                      0000038C
VarTbl_Tmr8F                      00000384
VarTbl_Tmr8S                      00000394
VarTbl_Tmr9D                      000003A0
VarTbl_Tmr9F                      00000398
VarTbl_Tmr9S                      000003A8
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_Old                             00000003
W_TEMP                            00000000
WaterStatus                       0000002D
WriteDatatoEEPROM                 00000000
Write_DS1307                      00000000
XDelay_0                          00000013
Yes                               00000001
YesNo                             00000002
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CP_OFF                           00003FFF
_CP_ON                            00001FFF
_DEVID1                           00002006
_ER_OSC_CLKOUT                    00003FFF
_ER_OSC_NOCLKOUT                  00003FFE
_EXTCLK_OSC                       00003FEF
_HS_OSC                           00003FEE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_INTOSC_OSC_CLKOUT                00003FFD
_INTOSC_OSC_NOCLKOUT              00003FFC
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_INT_Handler_0006                 00000006
_INT_Handler_0014                 00000014
_INT_Handler_0017                 00000017
_INT_Handler_001C                 0000001C
_LP_OSC                           00003FEC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PROG1_001A                       0000001A
_PROG1_0064                       00000064
_PROG1_006A                       0000006A
_PROG1_0074                       00000074
_PROG1_0079                       00000079
MPASM  5.51                          MAIN.ASM   4-5-2020  21:47:06         PAGE 56


SYMBOL TABLE
  LABEL                             VALUE 

_PROG1_007A                       0000007A
_PROG1_0081                       00000081
_PROG1_0082                       00000082
_PROG1_0089                       00000089
_PROG1_008A                       0000008A
_PROG1_008F                       0000008F
_PROG1_0090                       00000090
_PROG1_0095                       00000095
_PROG1_0096                       00000096
_PROG1_009B                       0000009B
_PROG1_009C                       0000009C
_PROG1_00A1                       000000A1
_PROG1_00A2                       000000A2
_PROG1_01DA                       000001DA
_PROG1_01F6                       000001F6
_PROG1_0217                       00000217
_PROG1_024E                       0000024E
_PROG1_0299                       00000299
_PROG1_029A                       0000029A
_PROG1_02A7                       000002A7
_PROG1_02E4                       000002E4
_PROG1_02F7                       000002F7
_PROG1_0302                       00000302
_PROG1_0307                       00000307
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC_CLKOUT                    00003FFF
_RC_OSC_NOCLKOUT                  00003FFE
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FED
__16F648A                         00000001
c                                 00000001
dx0                               0000002F
dx1                               00000030
i                                 00000000
m_RestoreBank                     
m_SaveBank                        
main                              00000000
tmp                               00000000
tmp2                              00000001
tmp3                              00000002
tmpDelay                          00000037

Errors   :     0
Warnings :     5 reported,   125 suppressed
Messages :     0 reported,    41 suppressed

